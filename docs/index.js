(()=>{"use strict";class t{static findIndex(e){return t.cart.findIndex((t=>t.id===e.id))}static addToCart(e){t.cart.push({id:e.id,amount:1,price:e.price}),t.saveCart()}static dropFromCart(e){t.cart.splice(t.findIndex(e),1),t.saveCart()}static increaseAmount(e){const r=t.findIndex(e);t.cart[r].amount+=1,t.saveCart()}static decreaseAmount(e){const r=t.findIndex(e);t.cart[r].amount-=1,t.saveCart()}static isProductInCart(e){return-1!==t.findIndex(e)}static getCartSum(){let e=0;return t.cart.forEach((t=>{e+=t.amount*t.price})),e}static getTotalAmount(){let e=0;return t.cart.forEach((t=>{e+=t.amount})),e}static saveCart(){localStorage.setItem("cart",JSON.stringify(t.cart))}static loadCart(){var e;const r=null!==(e=localStorage.getItem("cart"))&&void 0!==e?e:"[]";t.cart=JSON.parse(r)}static getProductTotalPrice(e){const r=t.findIndex(e);return t.cart[r].amount*t.cart[r].price}}const e=t;class r{static updateTotalCartDisplay(){r.totalSumCartDisplay.textContent=`$${e.getCartSum()}`,r.totalAmountCartDisplay.textContent=`${e.getTotalAmount()}`}}r.totalSumCartDisplay=document.querySelector(".header__sum-number"),r.totalAmountCartDisplay=document.querySelector(".cart-counter");const n=r;class a{static fillCard(t,r,a){const c=r.content.cloneNode(!0);c.className="card",c.querySelector(".card__title").textContent=t.title;const o=c.querySelector(".card__image");o.setAttribute("src",t.thumbnail),o.setAttribute("alt",t.title);const s=c.querySelector(".card__list");s.children[0].querySelector("span").textContent=t.category,s.children[1].querySelector("span").textContent=t.brand,s.children[2].querySelector("span").textContent=`$${t.price}`,s.children[3].querySelector("span").textContent=`${t.discountPercentage}`,s.children[4].querySelector("span").textContent=`${t.rating}`,s.children[5].querySelector("span").textContent=`${t.stock}`;const l=c.querySelector("a");l.href=`/product-details/${t.id}`,l.addEventListener("click",a);const i=c.querySelector(".add-to-cart-btn");return e.isProductInCart(t)&&(i.textContent="Drop"),i.addEventListener("click",(()=>{e.isProductInCart(t)?(e.dropFromCart(t),i.textContent="Add to cart"):(e.addToCart(t),i.textContent="Drop"),n.updateTotalCartDisplay()})),c}static draw(t,e){const r=document.querySelector(".cards");r.innerHTML="";const n=document.getElementById("card-template");n&&t.forEach((t=>r.append(a.fillCard(t,n,e))))}}const c=a;class o{static getProperties(t,e){const r={};return t.forEach((t=>{const n=t[e];r[n]=r[n]?r[n]+1:1})),r}static getMin(t,e){return Math.min(...t.map((t=>t[e])))}static getMax(t,e){return Math.max(...t.map((t=>t[e])))}static getCategories(t){return o.getProperties(t,"category")}static getBrands(t){return o.getProperties(t,"brand")}static getMinPrice(t){return o.getMin(t,"price")}static getMaxPrice(t){return o.getMax(t,"price")}static getMinStock(t){return o.getMin(t,"stock")}static getMaxStock(t){return o.getMax(t,"stock")}}const s=o;class l{static fillCheckboxGroup(t,e){const r=t.querySelector(".filters__list"),n=document.getElementById("checkbox-template");Object.keys(e).forEach((t=>{const e=n.content.cloneNode(!0),a=e.querySelector(".checkbox__input"),c=e.querySelector(".checkbox__label");a.id=t,c.htmlFor=t,c.textContent=t,r.append(e)}))}static fillRange(t,e,r,n){const a=t.querySelector(".range__from"),c=t.querySelector(".range__to"),o=[...t.querySelectorAll(".range__input")],s=t.querySelector(".range__bar");a.textContent=n?`$${e}`:`${e}`,c.textContent=n?`$${r}`:`${r}`;for(let t=0;t<o.length;t+=1)o[t].min=e.toString(),o[t].max=r.toString(),o[t].value=0===t?e.toString():r.toString();l.setRangeHandler(o[0],!0,o[0],o[1],0,a,n,s,e,r),l.setRangeHandler(o[1],!1,o[0],o[1],0,c,n,s,e,r)}static setRangeHandler(t,e,r,n,a,c,o,s,l,i){t.addEventListener("input",(()=>{const d=parseInt(r.value,10),u=parseInt(n.value,10);u-d<=a&&(t.value=(e?u-a:d+a).toString()),c.textContent=o?`$${t.value}`:`${t.value}`;const p=(d-l)/(i-l)*100,m=(u-l)/(i-l)*100;s.style.background=`linear-gradient(to right, #CCCCCC ${p}% , #1DA154 ${p}% , #1DA154 ${m}%, #CCCCCC ${m}%)`}))}static draw(t){const e=document.getElementById("filters-template").content.cloneNode(!0),r=[...e.querySelectorAll(".filters__group")],n=s.getCategories(t),a=s.getBrands(t);return l.fillCheckboxGroup(r[0],n),l.fillCheckboxGroup(r[1],a),l.fillRange(r[2],s.getMinPrice(t),s.getMaxPrice(t),!0),l.fillRange(r[3],s.getMinStock(t),s.getMaxStock(t),!1),e}}const i=l;class d{static setListeners(t){d.addCheckboxListener(t),d.addRangeListener(t),d.addSortListener(t),d.addSearchListener(t),d.addGridListener(t)}static addCheckboxListener(t){document.querySelector(".filters__checkboxes").addEventListener("click",(e=>{var r,n,a,c;if(e.preventDefault(),e.target instanceof HTMLLabelElement){const t=e.target.previousElementSibling,o=null===(c=null===(a=null===(n=null===(r=t.parentElement)||void 0===r?void 0:r.parentElement)||void 0===n?void 0:n.previousElementSibling)||void 0===a?void 0:a.textContent)||void 0===c?void 0:c.toLowerCase();if(t.checked){const e=d.appliedFilters[o].indexOf(t.id);d.appliedFilters[o].splice(e,1),0===d.appliedFilters[o].length&&delete d.appliedFilters[o]}else Object.prototype.hasOwnProperty.call(d.appliedFilters,o)?d.appliedFilters[o].push(t.id):d.appliedFilters[o]=[t.id]}t(d.appliedFilters)}))}static addRangeListener(t){document.querySelector(".filters__ranges").addEventListener("click",(e=>{var r,n,a,c,o;if(e.target instanceof HTMLInputElement){const s=null===(c=null===(a=null===(n=null===(r=e.target.parentElement)||void 0===r?void 0:r.parentElement)||void 0===n?void 0:n.previousElementSibling)||void 0===a?void 0:a.textContent)||void 0===c?void 0:c.toLowerCase(),l=null===(o=e.target.parentElement)||void 0===o?void 0:o.querySelectorAll(".range__input");d.appliedFilters[s]=[l[0].value,l[1].value],t(d.appliedFilters)}}))}static addSortListener(t){const e=document.querySelector(".sort");e.addEventListener("change",(()=>{const r=e.options[e.selectedIndex].value;e.selectedIndex=0,d.appliedFilters.sort=[r],t(d.appliedFilters)}))}static addSearchListener(t){const e=document.querySelector(".search");e.addEventListener("input",(()=>{const r=e.value;r.length>0?d.appliedFilters.search=[r]:delete d.appliedFilters.search,t(d.appliedFilters)}))}static addGridListener(t){document.querySelector(".products__grid-buttons").addEventListener("click",(e=>{e.target instanceof HTMLButtonElement&&(e.target.classList.contains("products__grid-button--matrix")&&(d.appliedFilters.grid=["matrix"]),e.target.classList.contains("products__grid-button--column")&&(d.appliedFilters.grid=["column"])),t(d.appliedFilters)}))}}d.appliedFilters={};const u=d;class p{static get instance(){return p.handlerInstance||(p.handlerInstance=new p),p.handlerInstance}static handleRangeView(t){t.forEach((t=>{const e=[...document.querySelectorAll(`.range__input[data-filter="${t[0]}"]`)];for(let r=0;r<e.length;r+=1)if(e[r]instanceof HTMLInputElement){e[r].value=t[1][r].toString();const n=new Event("input");e[r].dispatchEvent(n)}}))}static handleCheckboxesView(t){[...document.querySelectorAll(".checkbox__input")].forEach((e=>{e.checked=!1,t.includes(e.id)&&(e.checked=!0)}))}static filterProducts(t,e){let r=e;return t.forEach((t=>{if(p.filterKeys.includes(t[0])){const e=[],n=t[0];r.forEach((r=>{p.checkboxFilters.includes(t[0])&&t[1].includes(r[n])&&e.push(r),p.rangeFilters.includes(t[0])&&r[n]>=t[1][0]&&r[n]<=t[1][1]&&e.push(r)})),r=e}})),r}static handleFilters(t,e){const r=Object.entries(t),n=[],a=[];return r.forEach((t=>{p.checkboxFilters.includes(t[0])?n.push(...t[1]):p.rangeFilters.includes(t[0])&&a.push(t)})),p.handleCheckboxesView(n),p.handleRangeView(a),p.filterProducts(r,e)}}p.checkboxFilters=["category","brand"],p.rangeFilters=["price","stock"],p.filterKeys=[...p.checkboxFilters,...p.rangeFilters];const m=p,g=class{static handleSort(t,e){const r=[...e],n=document.querySelector(".sort"),a=t.sort[0].toString();n instanceof HTMLSelectElement&&(n.value=a);const[c,o]=a.split("-");return r.sort(((t,e)=>"ASC"===o?Number(t[c])-Number(e[c]):Number(e[c])-Number(t[c]))),r}},h=class{static handleSearch(t,e){const r=[],n=document.querySelector(".search"),a=t.search[0].toString();return n instanceof HTMLInputElement&&(n.value=a,n.focus()),e.forEach((t=>{const e=Object.entries(t);for(let n=0;n<e.length;n+=1)if(!["id","thumbnail","images"].includes(e[n][0])&&e[n][1].toString().toLowerCase().search(a.toLowerCase())>-1){r.push(t);break}})),r}},f=class{static createBlock(t,e){const r=document.createElement(t);return r.classList.add(...e),r}static createClone(t){return document.getElementById(t).content.cloneNode(!0)}static fillTextBlock(t,e,r,n=!1){t.querySelector(e).textContent=n?`$${r}`:r}static fillDataFields(t,e){Object.keys(e).forEach((r=>{const n=t.querySelector(`[data-field="${r}"]`);n instanceof HTMLImageElement?n.src=e[r].toString():n instanceof Element&&(n.textContent="price"===r?`$${e[r].toString()}`:e[r].toString())}))}},S=class{static draw(){return f.createClone("products-bar-template")}static updateProductsCount(t){document.querySelector(".products__found-count").textContent=`${t}`}};class y{static get allProducts(){return y._allProducts}static copyLinkHandler(t){navigator.clipboard.writeText(window.location.href).then((()=>{const e=t.target;e.textContent="Copied!",setTimeout((()=>{e.textContent="Copy link"}),500)})).catch((()=>{}))}static noProductsFound(){const t=document.querySelector(".cards");t.innerHTML="";const e=document.createElement("h1");e.textContent="No products Found",t.append(e)}static init(t){y._allProducts=t}static draw(t,e,r){const n=document.querySelector(".main");n.innerHTML="";const a=f.createBlock("div",["main-page","container"]),o=f.createBlock("div",["cards"]),s=f.createBlock("div",["products"]);n.append(a),a.append(i.draw(y.allProducts),s),s.append(S.draw(),o),u.appliedFilters=t,u.setListeners(e);const l=y.runFilters(o,t);l.length?c.draw(l,r):y.noProductsFound(),S.updateProductsCount(l.length);const d=document.querySelector("#copy-link-btn");null==d||d.addEventListener("click",y.copyLinkHandler);const p=document.querySelector("#reset-filters-btn");null==p||p.addEventListener("click",(()=>e({})))}static runFilters(t,e){let r;if(r=m.handleFilters(e,y.allProducts),Object.keys(e).includes("sort")&&(r=g.handleSort(e,r)),Object.keys(e).includes("search")&&(r=h.handleSearch(e,r)),Object.keys(e).includes("grid")){const[r]=[...e.grid];y.handleGridOption(t,r.toString())}return r}static handleGridOption(t,e){const r=[...document.querySelectorAll(".products__grid-button")];"column"===e&&(r[0].classList.remove("products__grid-button--active"),r[1].classList.add("products__grid-button--active"),t.classList.contains("cards--column")||t.classList.add("cards--column")),"matrix"===e&&(r[1].classList.remove("products__grid-button--active"),r[0].classList.add("products__grid-button--active"),t.classList.contains("cards--column")&&t.classList.remove("cards--column"))}}const C=y,_=class{static draw(){const t=document.querySelector(".main");t.children.length&&t.children[0].remove();const e=document.createElement("h1");e.textContent="Error 404. Page not found!",t.append(e)}};class v{static fillTextElements(t,e){for(let r=0;r<t.length;r+=1)t[r].textContent=`${e[r]}`}static setImageClickHandler(t,e){t.addEventListener("click",(t=>{t.target instanceof HTMLImageElement&&e.src!==t.target.src&&(e.src=t.target.getAttribute("src"))}))}static fillImages(t,e,r,n){const a=t.querySelector(e),c=t.querySelector(r);if([a.children[0],c].forEach((t=>{t.setAttribute("src",n.images[0]),t.setAttribute("alt",n.title)})),n.images.length>1)for(let t=1;t<n.images.length;t+=1){const e=a.children[0].cloneNode(!0);e.setAttribute("src",n.images[t]),a.append(e)}v.setImageClickHandler(a,c)}static fillPageTemplate(t){if(t){const e=document.getElementById("product-page-template").content.cloneNode(!0),r=[...e.querySelectorAll(".breadcrumbs__item")].slice(1),n=e.querySelector(".product__title"),a=[...e.querySelectorAll(".product__property span")],c=e.querySelector(".product__price span");v.fillTextElements([...r,n,...a,c],[t.category,t.brand,t.title,t.title,t.description,t.category,t.brand,t.rating,t.stock,t.discountPercentage,t.price]),v.fillImages(e,".product__images-list",".product__image--main",t);const o=document.querySelector(".main");o.children.length&&o.children[0].remove(),o.append(e)}else _.draw()}}const x=v;class b{static draw(){const t=f.createClone("cart-template"),e=localStorage.getItem("cart");"string"==typeof e&&("[]"===e?t.children[0].textContent="Cart is Empty":(b.fillProductsInfo(t,e),b.fillSummary(t)));const r=document.querySelector(".main");r.children.length&&r.children[0].remove(),r.append(t)}static fillProductsInfo(t,r){const n=t.querySelector(".order__list");JSON.parse(r).forEach(((t,r)=>{const a=f.createClone("order-item-template"),c=C.allProducts[t.id-1];f.fillTextBlock(a,".order__number",(r+1).toString()),f.fillDataFields(a,c),f.fillTextBlock(a,".order__amount",t.amount.toString()),f.fillTextBlock(a,".order__price span",e.getProductTotalPrice(c).toString(),!0),[...a.querySelectorAll(".order__button")].forEach((t=>{t.dataset.id=c.id.toString()})),n.append(a)})),b.setAmountButtonHandler(n)}static fillSummary(t){f.fillTextBlock(t,".summary__products span",e.getTotalAmount().toString()),f.fillTextBlock(t,".summary__total span",e.getCartSum().toString(),!0)}static setAmountButtonHandler(t){t.addEventListener("click",(t=>{var r,a;if(t.target instanceof HTMLButtonElement){const c=null===(r=t.target.parentElement)||void 0===r?void 0:r.querySelector(".order__amount");let o=Number(c.textContent);const s=Number(t.target.dataset.id),l=C.allProducts[s-1];if("decrease"===t.target.dataset.amount&&(1===o?(e.dropFromCart(l),b.draw(),o=0):(e.decreaseAmount(l),c.textContent=(o-1).toString())),"increase"===t.target.dataset.amount&&o!==C.allProducts[s-1].stock&&(e.increaseAmount(l),c.textContent=(o+1).toString()),0!==o){const t=null===(a=c.parentElement)||void 0===a?void 0:a.parentElement;f.fillTextBlock(t,".order__price span",e.getProductTotalPrice(l).toString(),!0)}const i=document.querySelector(".summary");i instanceof HTMLElement&&b.fillSummary(i),n.updateTotalCartDisplay()}}))}}const E=b;class k{static setUrlParams(t){const e=k.transformToUrlParams(t);window.history.pushState(t,"",e),k.handleLocation()}static transformToUrlParams(t){const e=Object.entries(t).map((([t,e])=>`${t}=${e.join(";")}`)).join("&");return`?${encodeURIComponent(e)}`}static transformUrlParams(t){const e={};return t&&decodeURIComponent(t).substring(1).split("&").forEach((t=>{const[r,n]=t.split("=");e[r]=null==n?void 0:n.split(";")})),e}static handleLocation(){const t=window.location.pathname,e=k.transformUrlParams(window.location.search);if("/"===t)C.draw(e,k.setUrlParams,k.setRoute);else switch(t.split("/")[1]){case"product-details":x.fillPageTemplate(C.allProducts[Number(t.split("/")[2])-1]);break;case"cart":E.draw();break;default:_.draw()}}}k.setRoute=t=>{const e=t||window.event;let r;e.preventDefault(),e.currentTarget instanceof HTMLAnchorElement&&(r=e.currentTarget.href),window.history.pushState({},"",r),k.handleLocation()};const L=k;class q{static errorHandler(t){if(t.ok)return t;throw 401!==t.status&&404!==t.status||console.log(`Sorry, but there is ${t.status} error: ${t.statusText}`),Error(t.statusText)}static fetchProductsData(){return fetch("https://dummyjson.com/products?limit=100").then((t=>q.errorHandler(t))).then((t=>t.json())).then((t=>t.products))}}const P=q,T=document.getElementById("logo-link");null==T||T.addEventListener("click",(t=>L.setRoute(t)));const w=document.getElementById("cart-link");null==w||w.addEventListener("click",(t=>L.setRoute(t))),e.loadCart(),n.updateTotalCartDisplay(),P.fetchProductsData().then((t=>{C.init(t),L.handleLocation()})).catch((t=>console.log(t))),window.addEventListener("popstate",(()=>L.handleLocation()))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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azovL29ubGluZS1zdG9yZS8uL3NyYy92aWV3L2hlYWRlci12aWV3LnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy92aWV3L2dyaWQtdmlldy50cyIsIndlYnBhY2s6Ly9vbmxpbmUtc3RvcmUvLi9zcmMvZGF0YS1oYW5kbGVyLnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy92aWV3L2ZpbHRlcnMtdmlldy50cyIsIndlYnBhY2s6Ly9vbmxpbmUtc3RvcmUvLi9zcmMvZmlsdGVycy1saXN0ZW5lci50cyIsIndlYnBhY2s6Ly9vbmxpbmUtc3RvcmUvLi9zcmMvZmlsdGVycy1oYW5kbGVyLnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy9zb3J0LWhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vb25saW5lLXN0b3JlLy4vc3JjL3NlYXJjaC1oYW5kbGVyLnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy9idWlsZGVyLnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy92aWV3L3Byb2R1Y3RzLWJhci12aWV3LnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy92aWV3L21haW4tcGFnZS12aWV3LnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy92aWV3L3BhZ2Utbm90LWZvdW5kLXZpZXcudHMiLCJ3ZWJwYWNrOi8vb25saW5lLXN0b3JlLy4vc3JjL3ZpZXcvcHJvZHVjdC12aWV3LnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy92aWV3L2NhcnQtdmlldy50cyIsIndlYnBhY2s6Ly9vbmxpbmUtc3RvcmUvLi9zcmMvcm91dGVyLnRzIiwid2VicGFjazovL29ubGluZS1zdG9yZS8uL3NyYy9kYXRhLWxvYWRlci50cyIsIndlYnBhY2s6Ly9vbmxpbmUtc3RvcmUvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi9pbnRlcmZhY2VzL3Byb2R1Y3QnO1xuaW1wb3J0IENhcnRFbGVtZW50IGZyb20gJy4vaW50ZXJmYWNlcy9jYXJ0LWVsZW1lbnQnO1xuXG5jbGFzcyBDYXJ0IHtcbiAgcHJpdmF0ZSBzdGF0aWMgY2FydDogQ2FydEVsZW1lbnRbXTtcblxuICBwcml2YXRlIHN0YXRpYyBmaW5kSW5kZXgocHJvZHVjdDogUHJvZHVjdCk6IG51bWJlciB7XG4gICAgcmV0dXJuIENhcnQuY2FydC5maW5kSW5kZXgoKGVsKSA9PiBlbC5pZCA9PT0gcHJvZHVjdC5pZCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFkZFRvQ2FydChwcm9kdWN0OiBQcm9kdWN0KTogdm9pZCB7XG4gICAgQ2FydC5jYXJ0LnB1c2goe1xuICAgICAgaWQ6IHByb2R1Y3QuaWQsXG4gICAgICBhbW91bnQ6IDEsXG4gICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcbiAgICB9KTtcblxuICAgIENhcnQuc2F2ZUNhcnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZHJvcEZyb21DYXJ0KHByb2R1Y3Q6IFByb2R1Y3QpOiB2b2lkIHtcbiAgICBDYXJ0LmNhcnQuc3BsaWNlKENhcnQuZmluZEluZGV4KHByb2R1Y3QpLCAxKTtcblxuICAgIENhcnQuc2F2ZUNhcnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgaW5jcmVhc2VBbW91bnQocHJvZHVjdDogUHJvZHVjdCk6IHZvaWQge1xuICAgIGNvbnN0IGlkeDogbnVtYmVyID0gQ2FydC5maW5kSW5kZXgocHJvZHVjdCk7XG4gICAgQ2FydC5jYXJ0W2lkeF0uYW1vdW50ICs9IDE7XG5cbiAgICBDYXJ0LnNhdmVDYXJ0KCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGRlY3JlYXNlQW1vdW50KHByb2R1Y3Q6IFByb2R1Y3QpOiB2b2lkIHtcbiAgICBjb25zdCBpZHg6IG51bWJlciA9IENhcnQuZmluZEluZGV4KHByb2R1Y3QpO1xuICAgIENhcnQuY2FydFtpZHhdLmFtb3VudCAtPSAxO1xuXG4gICAgQ2FydC5zYXZlQ2FydCgpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBpc1Byb2R1Y3RJbkNhcnQocHJvZHVjdDogUHJvZHVjdCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBDYXJ0LmZpbmRJbmRleChwcm9kdWN0KSAhPT0gLTE7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldENhcnRTdW0oKTogbnVtYmVyIHtcbiAgICBsZXQgc3VtID0gMDtcbiAgICBDYXJ0LmNhcnQuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIHN1bSArPSBlbC5hbW91bnQgKiBlbC5wcmljZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzdW07XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFRvdGFsQW1vdW50KCk6IG51bWJlciB7XG4gICAgbGV0IGFtb3VudCA9IDA7XG4gICAgQ2FydC5jYXJ0LmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBhbW91bnQgKz0gZWwuYW1vdW50O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGFtb3VudDtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHNhdmVDYXJ0KCk6IHZvaWQge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoQ2FydC5jYXJ0KSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGxvYWRDYXJ0KCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcnRGcm9tU3RvcmFnZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykgPz8gJ1tdJztcbiAgICBDYXJ0LmNhcnQgPSBKU09OLnBhcnNlKGNhcnRGcm9tU3RvcmFnZSkgYXMgQ2FydEVsZW1lbnRbXTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0UHJvZHVjdFRvdGFsUHJpY2UocHJvZHVjdDogUHJvZHVjdCk6IG51bWJlciB7XG4gICAgY29uc3QgaWR4OiBudW1iZXIgPSBDYXJ0LmZpbmRJbmRleChwcm9kdWN0KTtcbiAgICBjb25zdCB0b3RhbFByaWNlID0gQ2FydC5jYXJ0W2lkeF0uYW1vdW50ICogQ2FydC5jYXJ0W2lkeF0ucHJpY2U7XG5cbiAgICByZXR1cm4gdG90YWxQcmljZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJ0O1xuIiwiaW1wb3J0IENhcnQgZnJvbSAnLi4vY2FydCc7XG5cbmNsYXNzIEhlYWRlclZpZXcge1xuICBwcml2YXRlIHN0YXRpYyB0b3RhbFN1bUNhcnREaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAnLmhlYWRlcl9fc3VtLW51bWJlcicsXG4gICkgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgdG90YWxBbW91bnRDYXJ0RGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgJy5jYXJ0LWNvdW50ZXInLFxuICApIGFzIEhUTUxFbGVtZW50O1xuXG4gIHB1YmxpYyBzdGF0aWMgdXBkYXRlVG90YWxDYXJ0RGlzcGxheSgpOiB2b2lkIHtcbiAgICBIZWFkZXJWaWV3LnRvdGFsU3VtQ2FydERpc3BsYXkudGV4dENvbnRlbnQgPSBgJCR7Q2FydC5nZXRDYXJ0U3VtKCl9YDtcbiAgICBIZWFkZXJWaWV3LnRvdGFsQW1vdW50Q2FydERpc3BsYXkudGV4dENvbnRlbnQgPSBgJHtDYXJ0LmdldFRvdGFsQW1vdW50KCl9YDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIZWFkZXJWaWV3O1xuIiwiaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi4vaW50ZXJmYWNlcy9wcm9kdWN0JztcbmltcG9ydCBDYXJ0IGZyb20gJy4uL2NhcnQnO1xuaW1wb3J0IEhlYWRlclZpZXcgZnJvbSAnLi9oZWFkZXItdmlldyc7XG5cbmNsYXNzIEdyaWRWaWV3IHtcbiAgcHJpdmF0ZSBzdGF0aWMgZmlsbENhcmQoXG4gICAgaXRlbTogUHJvZHVjdCxcbiAgICB0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudCxcbiAgICBsaW5rSGFuZGxlcjogKGV2ZW50OiBFdmVudCkgPT4gdm9pZCxcbiAgKTogSFRNTERpdkVsZW1lbnQge1xuICAgIGNvbnN0IGNhcmQgPSB0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICBjYXJkLmNsYXNzTmFtZSA9ICdjYXJkJztcblxuICAgIGNvbnN0IHRpdGxlID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKSBhcyBFbGVtZW50O1xuICAgIHRpdGxlLnRleHRDb250ZW50ID0gaXRlbS50aXRsZTtcblxuICAgIGNvbnN0IGltZyA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJykgYXMgRWxlbWVudDtcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBpdGVtLnRodW1ibmFpbCk7XG4gICAgaW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgaXRlbS50aXRsZSk7XG5cbiAgICBjb25zdCBjYXJkTGlzdCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpc3QnKSBhcyBFbGVtZW50O1xuICAgIChjYXJkTGlzdC5jaGlsZHJlblswXS5xdWVyeVNlbGVjdG9yKCdzcGFuJykgYXMgRWxlbWVudCkudGV4dENvbnRlbnQgPVxuICAgICAgaXRlbS5jYXRlZ29yeTtcbiAgICAoY2FyZExpc3QuY2hpbGRyZW5bMV0ucXVlcnlTZWxlY3Rvcignc3BhbicpIGFzIEVsZW1lbnQpLnRleHRDb250ZW50ID1cbiAgICAgIGl0ZW0uYnJhbmQ7XG4gICAgKGNhcmRMaXN0LmNoaWxkcmVuWzJdLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnc3BhbicsXG4gICAgKSBhcyBFbGVtZW50KS50ZXh0Q29udGVudCA9IGAkJHtpdGVtLnByaWNlfWA7XG4gICAgKGNhcmRMaXN0LmNoaWxkcmVuWzNdLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnc3BhbicsXG4gICAgKSBhcyBFbGVtZW50KS50ZXh0Q29udGVudCA9IGAke2l0ZW0uZGlzY291bnRQZXJjZW50YWdlfWA7XG4gICAgKGNhcmRMaXN0LmNoaWxkcmVuWzRdLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnc3BhbicsXG4gICAgKSBhcyBFbGVtZW50KS50ZXh0Q29udGVudCA9IGAke2l0ZW0ucmF0aW5nfWA7XG4gICAgKGNhcmRMaXN0LmNoaWxkcmVuWzVdLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnc3BhbicsXG4gICAgKSBhcyBFbGVtZW50KS50ZXh0Q29udGVudCA9IGAke2l0ZW0uc3RvY2t9YDtcblxuICAgIGNvbnN0IGRldGFpbHNMaW5rID0gY2FyZC5xdWVyeVNlbGVjdG9yKCdhJykgYXMgSFRNTEFuY2hvckVsZW1lbnQ7XG4gICAgZGV0YWlsc0xpbmsuaHJlZiA9IGAvcHJvZHVjdC1kZXRhaWxzLyR7aXRlbS5pZH1gO1xuICAgIGRldGFpbHNMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGlua0hhbmRsZXIpO1xuXG4gICAgY29uc3QgYWRkVG9DYXJ0QnRuID0gY2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJy5hZGQtdG8tY2FydC1idG4nLFxuICAgICkgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICBpZiAoQ2FydC5pc1Byb2R1Y3RJbkNhcnQoaXRlbSkpIGFkZFRvQ2FydEJ0bi50ZXh0Q29udGVudCA9ICdEcm9wJztcblxuICAgIGFkZFRvQ2FydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICghQ2FydC5pc1Byb2R1Y3RJbkNhcnQoaXRlbSkpIHtcbiAgICAgICAgQ2FydC5hZGRUb0NhcnQoaXRlbSk7XG4gICAgICAgIGFkZFRvQ2FydEJ0bi50ZXh0Q29udGVudCA9ICdEcm9wJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIENhcnQuZHJvcEZyb21DYXJ0KGl0ZW0pO1xuICAgICAgICBhZGRUb0NhcnRCdG4udGV4dENvbnRlbnQgPSAnQWRkIHRvIGNhcnQnO1xuICAgICAgfVxuXG4gICAgICBIZWFkZXJWaWV3LnVwZGF0ZVRvdGFsQ2FydERpc3BsYXkoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgc3RhdGljIGRyYXcocHJvZHVjdHM6IFByb2R1Y3RbXSwgbGlua0hhbmRsZXI6IChlOiBFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY2FyZHMuaW5uZXJIVE1MID0gJyc7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICdjYXJkLXRlbXBsYXRlJyxcbiAgICApIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG5cbiAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgIHByb2R1Y3RzLmZvckVhY2goKGl0ZW0pID0+XG4gICAgICAgIGNhcmRzLmFwcGVuZChHcmlkVmlldy5maWxsQ2FyZChpdGVtLCB0ZW1wbGF0ZSwgbGlua0hhbmRsZXIpKSxcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdyaWRWaWV3O1xuIiwiaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi9pbnRlcmZhY2VzL3Byb2R1Y3QnO1xuXG5jbGFzcyBEYXRhSGFuZGxlciB7XG4gIHByaXZhdGUgc3RhdGljIGdldFByb3BlcnRpZXMoXG4gICAgcHJvZHVjdHM6IFByb2R1Y3RbXSxcbiAgICBwcm9wZXJ0eTogJ2NhdGVnb3J5JyB8ICdicmFuZCcsXG4gICk6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0ge1xuICAgIGNvbnN0IHByb3BlcnRpZXM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcblxuICAgIHByb2R1Y3RzLmZvckVhY2goKHByb2R1Y3QpID0+IHtcbiAgICAgIGNvbnN0IHByb3A6IHN0cmluZyA9IHByb2R1Y3RbcHJvcGVydHldO1xuXG4gICAgICBwcm9wZXJ0aWVzW3Byb3BdID0gcHJvcGVydGllc1twcm9wXSA/IHByb3BlcnRpZXNbcHJvcF0gKyAxIDogMTtcbiAgICB9KTtcblxuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0TWluKFxuICAgIHByb2R1Y3RzOiBQcm9kdWN0W10sXG4gICAgcHJvcGVydHk6ICdwcmljZScgfCAnc3RvY2snLFxuICApOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLm1pbiguLi5wcm9kdWN0cy5tYXAoKHByb2R1Y3QpID0+IHByb2R1Y3RbcHJvcGVydHldKSk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBnZXRNYXgoXG4gICAgcHJvZHVjdHM6IFByb2R1Y3RbXSxcbiAgICBwcm9wZXJ0eTogJ3ByaWNlJyB8ICdzdG9jaycsXG4gICk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGgubWF4KC4uLnByb2R1Y3RzLm1hcCgocHJvZHVjdCkgPT4gcHJvZHVjdFtwcm9wZXJ0eV0pKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRDYXRlZ29yaWVzKHByb2R1Y3RzOiBQcm9kdWN0W10pOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9IHtcbiAgICByZXR1cm4gRGF0YUhhbmRsZXIuZ2V0UHJvcGVydGllcyhwcm9kdWN0cywgJ2NhdGVnb3J5Jyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0QnJhbmRzKHByb2R1Y3RzOiBQcm9kdWN0W10pOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9IHtcbiAgICByZXR1cm4gRGF0YUhhbmRsZXIuZ2V0UHJvcGVydGllcyhwcm9kdWN0cywgJ2JyYW5kJyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0TWluUHJpY2UocHJvZHVjdHM6IFByb2R1Y3RbXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIERhdGFIYW5kbGVyLmdldE1pbihwcm9kdWN0cywgJ3ByaWNlJyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0TWF4UHJpY2UocHJvZHVjdHM6IFByb2R1Y3RbXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIERhdGFIYW5kbGVyLmdldE1heChwcm9kdWN0cywgJ3ByaWNlJyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0TWluU3RvY2socHJvZHVjdHM6IFByb2R1Y3RbXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIERhdGFIYW5kbGVyLmdldE1pbihwcm9kdWN0cywgJ3N0b2NrJyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0TWF4U3RvY2socHJvZHVjdHM6IFByb2R1Y3RbXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIERhdGFIYW5kbGVyLmdldE1heChwcm9kdWN0cywgJ3N0b2NrJyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YUhhbmRsZXI7XG4iLCJpbXBvcnQgRGF0YUhhbmRsZXIgZnJvbSAnLi4vZGF0YS1oYW5kbGVyJztcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4uL2ludGVyZmFjZXMvcHJvZHVjdCc7XG5cbmNsYXNzIEZpbHRlcnNWaWV3IHtcbiAgcHJpdmF0ZSBzdGF0aWMgZmlsbENoZWNrYm94R3JvdXAoXG4gICAgZ3JvdXA6IEVsZW1lbnQsXG4gICAgcGFyYW1ldGVyczogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgZmlsdGVyc0xpc3QgPSBncm91cC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyc19fbGlzdCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGNoZWNrYm94VGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICdjaGVja2JveC10ZW1wbGF0ZScsXG4gICAgKSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xuXG4gICAgT2JqZWN0LmtleXMocGFyYW1ldGVycykuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2hlY2tib3ggPSBjaGVja2JveFRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3QgY2hlY2tib3hJbnB1dCA9IGNoZWNrYm94LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICcuY2hlY2tib3hfX2lucHV0JyxcbiAgICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIGNvbnN0IGNoZWNrYm94TGFiZWwgPSBjaGVja2JveC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAnLmNoZWNrYm94X19sYWJlbCcsXG4gICAgICApIGFzIEhUTUxMYWJlbEVsZW1lbnQ7XG4gICAgICBjaGVja2JveElucHV0LmlkID0gaXRlbTtcbiAgICAgIGNoZWNrYm94TGFiZWwuaHRtbEZvciA9IGl0ZW07XG4gICAgICBjaGVja2JveExhYmVsLnRleHRDb250ZW50ID0gaXRlbTtcbiAgICAgIGZpbHRlcnNMaXN0LmFwcGVuZChjaGVja2JveCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBmaWxsUmFuZ2UoXG4gICAgYmxvY2s6IEVsZW1lbnQsXG4gICAgbWluOiBudW1iZXIsXG4gICAgbWF4OiBudW1iZXIsXG4gICAgaXNQcmljZTogYm9vbGVhbixcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgcmFuZ2VGcm9tID0gYmxvY2sucXVlcnlTZWxlY3RvcignLnJhbmdlX19mcm9tJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgcmFuZ2VUbyA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5yYW5nZV9fdG8nKSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCByYW5nZUlucHV0cyA9IFtcbiAgICAgIC4uLmJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yYW5nZV9faW5wdXQnKSxcbiAgICBdIGFzIEhUTUxJbnB1dEVsZW1lbnRbXTtcbiAgICBjb25zdCByYW5nZUJhciA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5yYW5nZV9fYmFyJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICByYW5nZUZyb20udGV4dENvbnRlbnQgPSBpc1ByaWNlID8gYCQke21pbn1gIDogYCR7bWlufWA7XG4gICAgcmFuZ2VUby50ZXh0Q29udGVudCA9IGlzUHJpY2UgPyBgJCR7bWF4fWAgOiBgJHttYXh9YDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VJbnB1dHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHJhbmdlSW5wdXRzW2ldLm1pbiA9IG1pbi50b1N0cmluZygpO1xuICAgICAgcmFuZ2VJbnB1dHNbaV0ubWF4ID0gbWF4LnRvU3RyaW5nKCk7XG4gICAgICByYW5nZUlucHV0c1tpXS52YWx1ZSA9IGkgPT09IDAgPyBtaW4udG9TdHJpbmcoKSA6IG1heC50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGNvbnN0IG1pbkdhcCA9IDA7XG4gICAgRmlsdGVyc1ZpZXcuc2V0UmFuZ2VIYW5kbGVyKFxuICAgICAgcmFuZ2VJbnB1dHNbMF0sXG4gICAgICB0cnVlLFxuICAgICAgcmFuZ2VJbnB1dHNbMF0sXG4gICAgICByYW5nZUlucHV0c1sxXSxcbiAgICAgIG1pbkdhcCxcbiAgICAgIHJhbmdlRnJvbSxcbiAgICAgIGlzUHJpY2UsXG4gICAgICByYW5nZUJhcixcbiAgICAgIG1pbixcbiAgICAgIG1heCxcbiAgICApO1xuICAgIEZpbHRlcnNWaWV3LnNldFJhbmdlSGFuZGxlcihcbiAgICAgIHJhbmdlSW5wdXRzWzFdLFxuICAgICAgZmFsc2UsXG4gICAgICByYW5nZUlucHV0c1swXSxcbiAgICAgIHJhbmdlSW5wdXRzWzFdLFxuICAgICAgbWluR2FwLFxuICAgICAgcmFuZ2VUbyxcbiAgICAgIGlzUHJpY2UsXG4gICAgICByYW5nZUJhcixcbiAgICAgIG1pbixcbiAgICAgIG1heCxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgc2V0UmFuZ2VIYW5kbGVyKFxuICAgIHJhbmdlOiBIVE1MSW5wdXRFbGVtZW50LFxuICAgIGlzTGVmdDogYm9vbGVhbixcbiAgICByYW5nZUxlZnQ6IEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgcmFuZ2VSaWdodDogSFRNTElucHV0RWxlbWVudCxcbiAgICBtaW5HYXA6IG51bWJlcixcbiAgICB0ZXh0QmxvY2s6IEhUTUxFbGVtZW50LFxuICAgIGlzUHJpY2U6IGJvb2xlYW4sXG4gICAgcmFuZ2VCYXI6IEhUTUxFbGVtZW50LFxuICAgIG1pbjogbnVtYmVyLFxuICAgIG1heDogbnVtYmVyLFxuICApOiB2b2lkIHtcbiAgICByYW5nZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGxlZnRWYWx1ZSA9IHBhcnNlSW50KHJhbmdlTGVmdC52YWx1ZSwgMTApO1xuICAgICAgY29uc3QgcmlnaHRWYWx1ZSA9IHBhcnNlSW50KHJhbmdlUmlnaHQudmFsdWUsIDEwKTtcbiAgICAgIGlmIChyaWdodFZhbHVlIC0gbGVmdFZhbHVlIDw9IG1pbkdhcCkge1xuICAgICAgICByYW5nZS52YWx1ZSA9IChpc0xlZnRcbiAgICAgICAgICA/IHJpZ2h0VmFsdWUgLSBtaW5HYXBcbiAgICAgICAgICA6IGxlZnRWYWx1ZSArIG1pbkdhcFxuICAgICAgICApLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgICB0ZXh0QmxvY2sudGV4dENvbnRlbnQgPSBpc1ByaWNlID8gYCQke3JhbmdlLnZhbHVlfWAgOiBgJHtyYW5nZS52YWx1ZX1gO1xuICAgICAgY29uc3QgcGVyY2VudExlZnQgPSAoKGxlZnRWYWx1ZSAtIG1pbikgLyAobWF4IC0gbWluKSkgKiAxMDA7XG4gICAgICBjb25zdCBwZXJjZW50UmlnaHQgPSAoKHJpZ2h0VmFsdWUgLSBtaW4pIC8gKG1heCAtIG1pbikpICogMTAwO1xuICAgICAgcmFuZ2VCYXIuc3R5bGUuYmFja2dyb3VuZCA9IGBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICNDQ0NDQ0MgJHtwZXJjZW50TGVmdH0lICwgIzFEQTE1NCAke3BlcmNlbnRMZWZ0fSUgLCAjMURBMTU0ICR7cGVyY2VudFJpZ2h0fSUsICNDQ0NDQ0MgJHtwZXJjZW50UmlnaHR9JSlgO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGRyYXcoaXRlbXM6IFByb2R1Y3RbXSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBibG9ja1RlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAnZmlsdGVycy10ZW1wbGF0ZScsXG4gICAgKSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xuICAgIGNvbnN0IGZpbHRlcnNCbG9jayA9IGJsb2NrVGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgZmlsdGVyc0dyb3VwczogRWxlbWVudFtdID0gW1xuICAgICAgLi4uZmlsdGVyc0Jsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXJzX19ncm91cCcpLFxuICAgIF07XG5cbiAgICBjb25zdCBjYXRlZ29yaWVzOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0gRGF0YUhhbmRsZXIuZ2V0Q2F0ZWdvcmllcyhcbiAgICAgIGl0ZW1zLFxuICAgICk7XG4gICAgY29uc3QgYnJhbmRzOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9ID0gRGF0YUhhbmRsZXIuZ2V0QnJhbmRzKGl0ZW1zKTtcblxuICAgIEZpbHRlcnNWaWV3LmZpbGxDaGVja2JveEdyb3VwKGZpbHRlcnNHcm91cHNbMF0sIGNhdGVnb3JpZXMpO1xuICAgIEZpbHRlcnNWaWV3LmZpbGxDaGVja2JveEdyb3VwKGZpbHRlcnNHcm91cHNbMV0sIGJyYW5kcyk7XG4gICAgRmlsdGVyc1ZpZXcuZmlsbFJhbmdlKFxuICAgICAgZmlsdGVyc0dyb3Vwc1syXSxcbiAgICAgIERhdGFIYW5kbGVyLmdldE1pblByaWNlKGl0ZW1zKSxcbiAgICAgIERhdGFIYW5kbGVyLmdldE1heFByaWNlKGl0ZW1zKSxcbiAgICAgIHRydWUsXG4gICAgKTtcbiAgICBGaWx0ZXJzVmlldy5maWxsUmFuZ2UoXG4gICAgICBmaWx0ZXJzR3JvdXBzWzNdLFxuICAgICAgRGF0YUhhbmRsZXIuZ2V0TWluU3RvY2soaXRlbXMpLFxuICAgICAgRGF0YUhhbmRsZXIuZ2V0TWF4U3RvY2soaXRlbXMpLFxuICAgICAgZmFsc2UsXG4gICAgKTtcblxuICAgIHJldHVybiBmaWx0ZXJzQmxvY2s7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmlsdGVyc1ZpZXc7XG4iLCJpbXBvcnQgRmlsdGVyc09iamVjdCBmcm9tICcuL2ludGVyZmFjZXMvZmlsdGVycyc7XG5cbmNsYXNzIEZpbHRlcnNMaXN0ZW5lciB7XG4gIHB1YmxpYyBzdGF0aWMgYXBwbGllZEZpbHRlcnM6IEZpbHRlcnNPYmplY3QgPSB7fTtcblxuICBwdWJsaWMgc3RhdGljIHNldExpc3RlbmVycyhxdWVyeUhhbmRsZXI6IChmaWx0ZXJzOiBGaWx0ZXJzT2JqZWN0KSA9PiB2b2lkKSB7XG4gICAgRmlsdGVyc0xpc3RlbmVyLmFkZENoZWNrYm94TGlzdGVuZXIocXVlcnlIYW5kbGVyKTtcbiAgICBGaWx0ZXJzTGlzdGVuZXIuYWRkUmFuZ2VMaXN0ZW5lcihxdWVyeUhhbmRsZXIpO1xuICAgIEZpbHRlcnNMaXN0ZW5lci5hZGRTb3J0TGlzdGVuZXIocXVlcnlIYW5kbGVyKTtcbiAgICBGaWx0ZXJzTGlzdGVuZXIuYWRkU2VhcmNoTGlzdGVuZXIocXVlcnlIYW5kbGVyKTtcbiAgICBGaWx0ZXJzTGlzdGVuZXIuYWRkR3JpZExpc3RlbmVyKHF1ZXJ5SGFuZGxlcik7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBhZGRDaGVja2JveExpc3RlbmVyKFxuICAgIHF1ZXJ5SGFuZGxlcjogKGZpbHRlcnM6IEZpbHRlcnNPYmplY3QpID0+IHZvaWQsXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94RmlsdGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAnLmZpbHRlcnNfX2NoZWNrYm94ZXMnLFxuICAgICkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY2hlY2tib3hGaWx0ZXJzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChldmVudC50YXJnZXQgaW5zdGFuY2VvZiBIVE1MTGFiZWxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94SW5wdXQgPSBldmVudC50YXJnZXRcbiAgICAgICAgICAucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXIgPSBjaGVja2JveElucHV0LnBhcmVudEVsZW1lbnQ/LnBhcmVudEVsZW1lbnQ/LnByZXZpb3VzRWxlbWVudFNpYmxpbmc/LnRleHRDb250ZW50Py50b0xvd2VyQ2FzZSgpIGFzIHN0cmluZztcbiAgICAgICAgaWYgKCFjaGVja2JveElucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICAgIEZpbHRlcnNMaXN0ZW5lci5hcHBsaWVkRmlsdGVycyxcbiAgICAgICAgICAgICAgcGFyYW1ldGVyLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgRmlsdGVyc0xpc3RlbmVyLmFwcGxpZWRGaWx0ZXJzW3BhcmFtZXRlcl0ucHVzaChjaGVja2JveElucHV0LmlkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgRmlsdGVyc0xpc3RlbmVyLmFwcGxpZWRGaWx0ZXJzW3BhcmFtZXRlcl0gPSBbY2hlY2tib3hJbnB1dC5pZF07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGluZGV4OiBudW1iZXIgPSBGaWx0ZXJzTGlzdGVuZXIuYXBwbGllZEZpbHRlcnNbXG4gICAgICAgICAgICBwYXJhbWV0ZXJcbiAgICAgICAgICBdLmluZGV4T2YoY2hlY2tib3hJbnB1dC5pZCk7XG4gICAgICAgICAgRmlsdGVyc0xpc3RlbmVyLmFwcGxpZWRGaWx0ZXJzW3BhcmFtZXRlcl0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICBpZiAoRmlsdGVyc0xpc3RlbmVyLmFwcGxpZWRGaWx0ZXJzW3BhcmFtZXRlcl0ubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgZGVsZXRlIEZpbHRlcnNMaXN0ZW5lci5hcHBsaWVkRmlsdGVyc1twYXJhbWV0ZXJdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBxdWVyeUhhbmRsZXIoRmlsdGVyc0xpc3RlbmVyLmFwcGxpZWRGaWx0ZXJzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGFkZFJhbmdlTGlzdGVuZXIoXG4gICAgcXVlcnlIYW5kbGVyOiAoZmlsdGVyczogRmlsdGVyc09iamVjdCkgPT4gdm9pZCxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgcmFuZ2VGaWx0ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICcuZmlsdGVyc19fcmFuZ2VzJyxcbiAgICApIGFzIEhUTUxFbGVtZW50O1xuICAgIHJhbmdlRmlsdGVycy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudDogRXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC50YXJnZXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlciA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50Py5wYXJlbnRFbGVtZW50Py5wcmV2aW91c0VsZW1lbnRTaWJsaW5nPy50ZXh0Q29udGVudD8udG9Mb3dlckNhc2UoKSBhcyBzdHJpbmc7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5wdXRzID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICAgJy5yYW5nZV9faW5wdXQnLFxuICAgICAgICApIGFzIE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XG4gICAgICAgIEZpbHRlcnNMaXN0ZW5lci5hcHBsaWVkRmlsdGVyc1twYXJhbWV0ZXJdID0gW1xuICAgICAgICAgIHJhbmdlSW5wdXRzWzBdLnZhbHVlLFxuICAgICAgICAgIHJhbmdlSW5wdXRzWzFdLnZhbHVlLFxuICAgICAgICBdO1xuICAgICAgICBxdWVyeUhhbmRsZXIoRmlsdGVyc0xpc3RlbmVyLmFwcGxpZWRGaWx0ZXJzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGFkZFNvcnRMaXN0ZW5lcihcbiAgICBxdWVyeUhhbmRsZXI6IChmaWx0ZXJzOiBGaWx0ZXJzT2JqZWN0KSA9PiB2b2lkLFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBzb3J0U2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvcnQnKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICBzb3J0U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gc29ydFNlbGVjdC5vcHRpb25zW3NvcnRTZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gICAgICBzb3J0U2VsZWN0LnNlbGVjdGVkSW5kZXggPSAwO1xuICAgICAgRmlsdGVyc0xpc3RlbmVyLmFwcGxpZWRGaWx0ZXJzLnNvcnQgPSBbc2VsZWN0ZWRPcHRpb25dO1xuICAgICAgcXVlcnlIYW5kbGVyKEZpbHRlcnNMaXN0ZW5lci5hcHBsaWVkRmlsdGVycyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBhZGRTZWFyY2hMaXN0ZW5lcihcbiAgICBxdWVyeUhhbmRsZXI6IChmaWx0ZXJzOiBGaWx0ZXJzT2JqZWN0KSA9PiB2b2lkLFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VhcmNoUXVlcnkgPSBzZWFyY2hJbnB1dC52YWx1ZTtcbiAgICAgIGlmIChzZWFyY2hRdWVyeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIEZpbHRlcnNMaXN0ZW5lci5hcHBsaWVkRmlsdGVycy5zZWFyY2ggPSBbc2VhcmNoUXVlcnldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRlIEZpbHRlcnNMaXN0ZW5lci5hcHBsaWVkRmlsdGVycy5zZWFyY2g7IFxuICAgICAgfVxuICAgICAgcXVlcnlIYW5kbGVyKEZpbHRlcnNMaXN0ZW5lci5hcHBsaWVkRmlsdGVycyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBhZGRHcmlkTGlzdGVuZXIoXG4gICAgcXVlcnlIYW5kbGVyOiAoZmlsdGVyczogRmlsdGVyc09iamVjdCkgPT4gdm9pZCxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgZ3JpZEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHNfX2dyaWQtYnV0dG9ucycpIGFzIEhUTUxFbGVtZW50O1xuICAgIGdyaWRCdXR0b25zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2R1Y3RzX19ncmlkLWJ1dHRvbi0tbWF0cml4JykpIHtcbiAgICAgICAgICBGaWx0ZXJzTGlzdGVuZXIuYXBwbGllZEZpbHRlcnMuZ3JpZCA9IFsnbWF0cml4J107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2R1Y3RzX19ncmlkLWJ1dHRvbi0tY29sdW1uJykpIHtcbiAgICAgICAgICBGaWx0ZXJzTGlzdGVuZXIuYXBwbGllZEZpbHRlcnMuZ3JpZCA9IFsnY29sdW1uJ107XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHF1ZXJ5SGFuZGxlcihGaWx0ZXJzTGlzdGVuZXIuYXBwbGllZEZpbHRlcnMpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZpbHRlcnNMaXN0ZW5lcjtcbiIsImltcG9ydCBGaWx0ZXJzT2JqZWN0IGZyb20gJy4vaW50ZXJmYWNlcy9maWx0ZXJzJztcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4vaW50ZXJmYWNlcy9wcm9kdWN0JztcblxudHlwZSBGaWx0ZXJLZXkgPSAnY2F0ZWdvcnknIHwgJ2JyYW5kJyB8ICdwcmljZScgfCAnc3RvY2snO1xuXG5jbGFzcyBGaWx0ZXJzSGFuZGxlciB7XG4gIHByaXZhdGUgc3RhdGljIGhhbmRsZXJJbnN0YW5jZTogRmlsdGVyc0hhbmRsZXI7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgY2hlY2tib3hGaWx0ZXJzID0gWydjYXRlZ29yeScsICdicmFuZCddO1xuXG4gIHByaXZhdGUgc3RhdGljIHJhbmdlRmlsdGVycyA9IFsncHJpY2UnLCAnc3RvY2snXTtcblxuICBwcml2YXRlIHN0YXRpYyBmaWx0ZXJLZXlzID0gW1xuICAgIC4uLkZpbHRlcnNIYW5kbGVyLmNoZWNrYm94RmlsdGVycyxcbiAgICAuLi5GaWx0ZXJzSGFuZGxlci5yYW5nZUZpbHRlcnMsXG4gIF07XG5cbiAgcHVibGljIHN0YXRpYyBnZXQgaW5zdGFuY2UoKSB7XG4gICAgaWYgKCFGaWx0ZXJzSGFuZGxlci5oYW5kbGVySW5zdGFuY2UpXG4gICAgICBGaWx0ZXJzSGFuZGxlci5oYW5kbGVySW5zdGFuY2UgPSBuZXcgRmlsdGVyc0hhbmRsZXIoKTtcbiAgICByZXR1cm4gRmlsdGVyc0hhbmRsZXIuaGFuZGxlckluc3RhbmNlO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgaGFuZGxlUmFuZ2VWaWV3KFxuICAgIGZpbHRlcnM6IFtzdHJpbmcsIChzdHJpbmcgfCBudW1iZXIpW11dW10sXG4gICk6IHZvaWQge1xuICAgIGZpbHRlcnMuZm9yRWFjaCgoZmlsdGVyKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dHMgPSBbXG4gICAgICAgIC4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICAgYC5yYW5nZV9faW5wdXRbZGF0YS1maWx0ZXI9XCIke2ZpbHRlclswXX1cIl1gLFxuICAgICAgICApLFxuICAgICAgXSBhcyBIVE1MSW5wdXRFbGVtZW50W107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoaW5wdXRzW2ldIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgIGlucHV0c1tpXS52YWx1ZSA9IGZpbHRlclsxXVtpXS50b1N0cmluZygpO1xuICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcpO1xuICAgICAgICAgIGlucHV0c1tpXS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgaGFuZGxlQ2hlY2tib3hlc1ZpZXcodmFsdWVzOiAoc3RyaW5nIHwgbnVtYmVyKVtdKTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tib3hJbnB1dHMgPSBbXG4gICAgICAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hlY2tib3hfX2lucHV0JyksXG4gICAgXSBhcyBIVE1MSW5wdXRFbGVtZW50W107XG4gICAgY2hlY2tib3hJbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgIGlmICh2YWx1ZXMuaW5jbHVkZXMoaW5wdXQuaWQpKSB7XG4gICAgICAgIGlucHV0LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZmlsdGVyUHJvZHVjdHMoXG4gICAgZmlsdGVyQXJyYXk6IEFycmF5PFtzdHJpbmcsIEFycmF5PHN0cmluZyB8IG51bWJlcj5dPixcbiAgICBwcm9kdWN0czogUHJvZHVjdFtdLFxuICApOiBQcm9kdWN0W10ge1xuICAgIGxldCBmaWx0ZXJlZFByb2R1Y3RzOiBQcm9kdWN0W10gPSBwcm9kdWN0cztcbiAgICBmaWx0ZXJBcnJheS5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgICAgIGlmIChGaWx0ZXJzSGFuZGxlci5maWx0ZXJLZXlzLmluY2x1ZGVzKGZpbHRlclswXSkpIHtcbiAgICAgICAgY29uc3QgbmV3RmlsdGVyZWRQcm9kdWN0czogUHJvZHVjdFtdID0gW107XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlciA9IGZpbHRlclswXSBhcyBGaWx0ZXJLZXk7XG4gICAgICAgIGZpbHRlcmVkUHJvZHVjdHMuZm9yRWFjaCgocHJvZHVjdCkgPT4ge1xuICAgICAgICAgIGlmIChGaWx0ZXJzSGFuZGxlci5jaGVja2JveEZpbHRlcnMuaW5jbHVkZXMoZmlsdGVyWzBdKSkge1xuICAgICAgICAgICAgaWYgKGZpbHRlclsxXS5pbmNsdWRlcyhwcm9kdWN0W3BhcmFtZXRlcl0pKVxuICAgICAgICAgICAgICBuZXdGaWx0ZXJlZFByb2R1Y3RzLnB1c2gocHJvZHVjdCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChGaWx0ZXJzSGFuZGxlci5yYW5nZUZpbHRlcnMuaW5jbHVkZXMoZmlsdGVyWzBdKSkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBwcm9kdWN0W3BhcmFtZXRlcl0gPj0gZmlsdGVyWzFdWzBdICYmXG4gICAgICAgICAgICAgIHByb2R1Y3RbcGFyYW1ldGVyXSA8PSBmaWx0ZXJbMV1bMV1cbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBuZXdGaWx0ZXJlZFByb2R1Y3RzLnB1c2gocHJvZHVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZmlsdGVyZWRQcm9kdWN0cyA9IG5ld0ZpbHRlcmVkUHJvZHVjdHM7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGZpbHRlcmVkUHJvZHVjdHM7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGhhbmRsZUZpbHRlcnMoXG4gICAgZmlsdGVyczogRmlsdGVyc09iamVjdCxcbiAgICBwcm9kdWN0czogUHJvZHVjdFtdLFxuICApOiBQcm9kdWN0W10ge1xuICAgIGNvbnN0IGZpbHRlckFycmF5OiBBcnJheTxbc3RyaW5nLCBBcnJheTxzdHJpbmcgfCBudW1iZXI+XT4gPSBPYmplY3QuZW50cmllcyhcbiAgICAgIGZpbHRlcnMsXG4gICAgKTtcbiAgICBjb25zdCBjaGVja2JveFZhbHVlczogKHN0cmluZyB8IG51bWJlcilbXSA9IFtdO1xuICAgIGNvbnN0IHJhbmdlVmFsdWVzOiBbc3RyaW5nLCAoc3RyaW5nIHwgbnVtYmVyKVtdXVtdID0gW107XG4gICAgZmlsdGVyQXJyYXkuZm9yRWFjaCgoZmlsdGVyKSA9PiB7XG4gICAgICBpZiAoRmlsdGVyc0hhbmRsZXIuY2hlY2tib3hGaWx0ZXJzLmluY2x1ZGVzKGZpbHRlclswXSkpIHtcbiAgICAgICAgY2hlY2tib3hWYWx1ZXMucHVzaCguLi5maWx0ZXJbMV0pO1xuICAgICAgfSBlbHNlIGlmIChGaWx0ZXJzSGFuZGxlci5yYW5nZUZpbHRlcnMuaW5jbHVkZXMoZmlsdGVyWzBdKSkge1xuICAgICAgICByYW5nZVZhbHVlcy5wdXNoKGZpbHRlcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgRmlsdGVyc0hhbmRsZXIuaGFuZGxlQ2hlY2tib3hlc1ZpZXcoY2hlY2tib3hWYWx1ZXMpO1xuICAgIEZpbHRlcnNIYW5kbGVyLmhhbmRsZVJhbmdlVmlldyhyYW5nZVZhbHVlcyk7XG5cbiAgICBjb25zdCBmaWx0ZXJlZFByb2R1Y3RzOiBQcm9kdWN0W10gPSBGaWx0ZXJzSGFuZGxlci5maWx0ZXJQcm9kdWN0cyhcbiAgICAgIGZpbHRlckFycmF5LFxuICAgICAgcHJvZHVjdHMsXG4gICAgKTtcblxuICAgIHJldHVybiBmaWx0ZXJlZFByb2R1Y3RzO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZpbHRlcnNIYW5kbGVyO1xuIiwiaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi9pbnRlcmZhY2VzL3Byb2R1Y3QnO1xuaW1wb3J0IEZpbHRlcnNPYmplY3QgZnJvbSAnLi9pbnRlcmZhY2VzL2ZpbHRlcnMnO1xuXG50eXBlIFNvcnRLZXkgPSAncHJpY2UnIHwgJ3JhdGluZycgfCAnZGlzY291bnRQZXJjZW50YWdlJztcblxuY2xhc3MgU29ydEhhbmRsZXIge1xuICBcbiAgcHVibGljIHN0YXRpYyBoYW5kbGVTb3J0KGZpbHRlcnM6IEZpbHRlcnNPYmplY3QsIHByb2R1Y3RzOiBQcm9kdWN0W10pOiBQcm9kdWN0W10ge1xuICAgIGNvbnN0IHNvcnRlZFByb2R1Y3RzOiBQcm9kdWN0W10gPSBbLi4ucHJvZHVjdHNdO1xuICAgIGNvbnN0IHNvcnRTZWxlY3Q6IEVsZW1lbnQgfCBudWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvcnQnKTtcbiAgICBjb25zdCBvcHRpb246IHN0cmluZyA9IGZpbHRlcnMuc29ydFswXS50b1N0cmluZygpO1xuICAgIGlmIChzb3J0U2VsZWN0IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpIHNvcnRTZWxlY3QudmFsdWUgPSBvcHRpb247XG5cbiAgICBjb25zdCBbcGFyYW1ldGVyLCBkaXJlY3Rpb25dID0gb3B0aW9uLnNwbGl0KCctJykgYXMgW1NvcnRLZXksIHN0cmluZ107XG4gICAgc29ydGVkUHJvZHVjdHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ0FTQycpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcihhW3BhcmFtZXRlcl0pIC0gTnVtYmVyKGJbcGFyYW1ldGVyXSk7XG4gICAgICB9IFxuICAgICAgcmV0dXJuIE51bWJlcihiW3BhcmFtZXRlcl0pIC0gTnVtYmVyKGFbcGFyYW1ldGVyXSk7XG4gICAgfSlcbiAgICByZXR1cm4gc29ydGVkUHJvZHVjdHM7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU29ydEhhbmRsZXI7XG4iLCJpbXBvcnQgUHJvZHVjdCBmcm9tICcuL2ludGVyZmFjZXMvcHJvZHVjdCc7XG5pbXBvcnQgRmlsdGVyc09iamVjdCBmcm9tICcuL2ludGVyZmFjZXMvZmlsdGVycyc7XG5cbmNsYXNzIFNlYXJjaEhhbmRsZXIge1xuICBcbiAgcHVibGljIHN0YXRpYyBoYW5kbGVTZWFyY2goZmlsdGVyczogRmlsdGVyc09iamVjdCwgcHJvZHVjdHM6IFByb2R1Y3RbXSk6IFByb2R1Y3RbXSB7XG4gICAgY29uc3QgZm91bmRQcm9kdWN0czogUHJvZHVjdFtdID0gW107XG4gICAgY29uc3Qgc2VhcmNoSW5wdXQ6IEVsZW1lbnQgfCBudWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaCcpO1xuICAgIGNvbnN0IHNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSBmaWx0ZXJzLnNlYXJjaFswXS50b1N0cmluZygpO1xuICAgIGlmIChzZWFyY2hJbnB1dCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgIHNlYXJjaElucHV0LnZhbHVlID0gc2VhcmNoUXVlcnk7XG4gICAgICBzZWFyY2hJbnB1dC5mb2N1cygpO1xuICAgIH1cbiAgICBcbiAgICBwcm9kdWN0cy5mb3JFYWNoKChwcm9kdWN0OiBQcm9kdWN0KSA9PiB7XG4gICAgICBjb25zdCBwcm9kdWN0Rm9yU2VhcmNoOiBbc3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBzdHJpbmdbXV1bXSA9IE9iamVjdC5lbnRyaWVzKHByb2R1Y3QpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9kdWN0Rm9yU2VhcmNoLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmICghWydpZCcsICd0aHVtYm5haWwnLCAnaW1hZ2VzJ10uaW5jbHVkZXMocHJvZHVjdEZvclNlYXJjaFtpXVswXSkpIHtcbiAgICAgICAgICBpZiAocHJvZHVjdEZvclNlYXJjaFtpXVsxXS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuc2VhcmNoKHNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCkpID4gLTEpIHtcbiAgICAgICAgICAgIGZvdW5kUHJvZHVjdHMucHVzaChwcm9kdWN0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGZvdW5kUHJvZHVjdHM7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoSGFuZGxlcjtcbiIsImltcG9ydCBQcm9kdWN0IGZyb20gJy4vaW50ZXJmYWNlcy9wcm9kdWN0JztcblxuY2xhc3MgQnVpbGRlciB7XG4gIHN0YXRpYyBjcmVhdGVCbG9jayh0YWc6IHN0cmluZywgY2xhc3Nlczogc3RyaW5nW10pOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgYmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgYmxvY2suY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKTtcbiAgICByZXR1cm4gYmxvY2s7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlQ2xvbmUoaWQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xuICAgIGNvbnN0IGJsb2NrID0gdGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgcmV0dXJuIGJsb2NrO1xuICB9XG5cbiAgc3RhdGljIGZpbGxUZXh0QmxvY2socGFyZW50QmxvY2s6IEVsZW1lbnQsIHNlbGVjdG9yOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgaXNQcmljZSA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3QgYmxvY2sgPSBwYXJlbnRCbG9jay5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSBhcyBFbGVtZW50O1xuICAgIGJsb2NrLnRleHRDb250ZW50ID0gaXNQcmljZSA/IGAkJHtjb250ZW50fWAgOiBjb250ZW50O1xuICB9XG5cbiAgc3RhdGljIGZpbGxEYXRhRmllbGRzKHBhcmVudEJsb2NrOiBFbGVtZW50LCBwcm9kdWN0OiBQcm9kdWN0KTogdm9pZCB7XG4gICAgY29uc3Qga2V5czogc3RyaW5nW10gPSBPYmplY3Qua2V5cyhwcm9kdWN0KTtcbiAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29uc3QgYmxvY2s6IEVsZW1lbnQgfCBudWxsID0gcGFyZW50QmxvY2sucXVlcnlTZWxlY3RvcihgW2RhdGEtZmllbGQ9XCIke2tleX1cIl1gKTtcbiAgICAgIGlmIChibG9jayBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgICAgICAgYmxvY2suc3JjID0gcHJvZHVjdFtrZXkgYXMga2V5b2YgUHJvZHVjdF0udG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSBpZiAoYmxvY2sgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgIGJsb2NrLnRleHRDb250ZW50ID0ga2V5ID09PSAncHJpY2UnID8gYCQke3Byb2R1Y3Rba2V5IGFzIGtleW9mIFByb2R1Y3RdLnRvU3RyaW5nKCl9YCA6IHByb2R1Y3Rba2V5IGFzIGtleW9mIFByb2R1Y3RdLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCdWlsZGVyOyIsImltcG9ydCBCdWlsZGVyIGZyb20gJy4uL2J1aWxkZXInO1xuXG5jbGFzcyBQcm9kdWN0c0JhclZpZXcge1xuICBwdWJsaWMgc3RhdGljIGRyYXcoKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGJhckJsb2NrID0gQnVpbGRlci5jcmVhdGVDbG9uZSgncHJvZHVjdHMtYmFyLXRlbXBsYXRlJyk7XG4gICAgcmV0dXJuIGJhckJsb2NrO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyB1cGRhdGVQcm9kdWN0c0NvdW50KGNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBmb3VuZENvdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3RzX19mb3VuZC1jb3VudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGZvdW5kQ291bnQudGV4dENvbnRlbnQgPSBgJHtjb3VudH1gO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2R1Y3RzQmFyVmlldzsiLCJpbXBvcnQgR3JpZFZpZXcgZnJvbSAnLi9ncmlkLXZpZXcnO1xuaW1wb3J0IEZpbHRlcnNWaWV3IGZyb20gJy4vZmlsdGVycy12aWV3JztcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4uL2ludGVyZmFjZXMvcHJvZHVjdCc7XG5pbXBvcnQgRmlsdGVyc0xpc3RlbmVyIGZyb20gJy4uL2ZpbHRlcnMtbGlzdGVuZXInO1xuaW1wb3J0IEZpbHRlcnNIYW5kbGVyIGZyb20gJy4uL2ZpbHRlcnMtaGFuZGxlcic7XG5pbXBvcnQgU29ydEhhbmRsZXIgZnJvbSAnLi4vc29ydC1oYW5kbGVyJztcbmltcG9ydCBTZWFyY2hIYW5kbGVyIGZyb20gJy4uL3NlYXJjaC1oYW5kbGVyJztcbmltcG9ydCBGaWx0ZXJzT2JqZWN0IGZyb20gJy4uL2ludGVyZmFjZXMvZmlsdGVycyc7XG5pbXBvcnQgUHJvZHVjdHNCYXJWaWV3IGZyb20gJy4vcHJvZHVjdHMtYmFyLXZpZXcnO1xuaW1wb3J0IEJ1aWxkZXIgZnJvbSAnLi4vYnVpbGRlcic7XG5cbmNsYXNzIE1haW5QYWdlVmlldyB7XG4gIHByaXZhdGUgc3RhdGljIF9hbGxQcm9kdWN0czogUHJvZHVjdFtdO1xuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IGFsbFByb2R1Y3RzKCkge1xuICAgIHJldHVybiBNYWluUGFnZVZpZXcuX2FsbFByb2R1Y3RzO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgY29weUxpbmtIYW5kbGVyKGU6IEV2ZW50KTogdm9pZCB7XG4gICAgbmF2aWdhdG9yLmNsaXBib2FyZFxuICAgICAgLndyaXRlVGV4dCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc3QgYnRuID0gZS50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICdDb3BpZWQhJztcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ0NvcHkgbGluayc7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHt9KTtcbiAgfVxuXG4gIC8vIHByaXZhdGUgc3RhdGljIHJlc2V0RmlsdGVyc0hhbmRsZXIoKTogdm9pZCB7XG5cbiAgLy8gfVxuXG4gIHByaXZhdGUgc3RhdGljIG5vUHJvZHVjdHNGb3VuZCgpOiB2b2lkIHtcbiAgICBjb25zdCBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkcycpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNhcmRzLmlubmVySFRNTCA9ICcnO1xuICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gICAgaGVhZGVyLnRleHRDb250ZW50ID0gJ05vIHByb2R1Y3RzIEZvdW5kJztcbiAgICBjYXJkcy5hcHBlbmQoaGVhZGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgaW5pdChwcm9kdWN0czogUHJvZHVjdFtdKTogdm9pZCB7XG4gICAgTWFpblBhZ2VWaWV3Ll9hbGxQcm9kdWN0cyA9IHByb2R1Y3RzO1xuICB9XG5cbiAgc3RhdGljIGRyYXcoXG4gICAgZmlsdGVyczogRmlsdGVyc09iamVjdCxcbiAgICBxdWVyeUhhbmRsZXI6IChmaWx0ZXJzOiBGaWx0ZXJzT2JqZWN0KSA9PiB2b2lkLFxuICAgIGxpbmtIYW5kbGVyOiAoZTogRXZlbnQpID0+IHZvaWQsXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHBhcmVudEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpIGFzIEhUTUxFbGVtZW50O1xuICAgIHBhcmVudEVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgY29uc3QgY29udGFpbmVyID0gQnVpbGRlci5jcmVhdGVCbG9jaygnZGl2JywgWydtYWluLXBhZ2UnLCAnY29udGFpbmVyJ10pO1xuICAgIGNvbnN0IGNhcmRzID0gQnVpbGRlci5jcmVhdGVCbG9jaygnZGl2JywgWydjYXJkcyddKTtcbiAgICBjb25zdCBwcm9kdWN0c0Jsb2NrID0gQnVpbGRlci5jcmVhdGVCbG9jaygnZGl2JywgWydwcm9kdWN0cyddKTtcblxuICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kKGNvbnRhaW5lcik7XG4gICAgY29udGFpbmVyLmFwcGVuZChGaWx0ZXJzVmlldy5kcmF3KE1haW5QYWdlVmlldy5hbGxQcm9kdWN0cyksIHByb2R1Y3RzQmxvY2spO1xuICAgIHByb2R1Y3RzQmxvY2suYXBwZW5kKFByb2R1Y3RzQmFyVmlldy5kcmF3KCksIGNhcmRzKTtcbiAgICBGaWx0ZXJzTGlzdGVuZXIuYXBwbGllZEZpbHRlcnMgPSBmaWx0ZXJzO1xuICAgIEZpbHRlcnNMaXN0ZW5lci5zZXRMaXN0ZW5lcnMocXVlcnlIYW5kbGVyKTtcblxuICAgIGNvbnN0IHByb2R1Y3RzRm9yUmVuZGVyaW5nOiBQcm9kdWN0W10gPSBNYWluUGFnZVZpZXcucnVuRmlsdGVycyhjYXJkcywgZmlsdGVycyk7XG4gICAgaWYgKHByb2R1Y3RzRm9yUmVuZGVyaW5nLmxlbmd0aClcbiAgICAgIEdyaWRWaWV3LmRyYXcocHJvZHVjdHNGb3JSZW5kZXJpbmcsIGxpbmtIYW5kbGVyKTtcbiAgICBlbHNlIE1haW5QYWdlVmlldy5ub1Byb2R1Y3RzRm91bmQoKTtcbiAgICBQcm9kdWN0c0JhclZpZXcudXBkYXRlUHJvZHVjdHNDb3VudChwcm9kdWN0c0ZvclJlbmRlcmluZy5sZW5ndGgpO1xuXG4gICAgY29uc3QgY29weUxpbmtCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29weS1saW5rLWJ0bicpO1xuICAgIGNvcHlMaW5rQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIE1haW5QYWdlVmlldy5jb3B5TGlua0hhbmRsZXIpO1xuXG4gICAgY29uc3QgcmVzZXRGaWx0ZXJzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jlc2V0LWZpbHRlcnMtYnRuJyk7XG4gICAgcmVzZXRGaWx0ZXJzQnRuPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHF1ZXJ5SGFuZGxlcih7fSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcnVuRmlsdGVycyhjYXJkczogSFRNTEVsZW1lbnQsIGZpbHRlcnM6IEZpbHRlcnNPYmplY3QpOiBQcm9kdWN0W10ge1xuICAgIGxldCBwcm9kdWN0c0ZvclJlbmRlcmluZzogUHJvZHVjdFtdO1xuICAgIHByb2R1Y3RzRm9yUmVuZGVyaW5nID0gRmlsdGVyc0hhbmRsZXIuaGFuZGxlRmlsdGVycyhcbiAgICAgIGZpbHRlcnMsXG4gICAgICBNYWluUGFnZVZpZXcuYWxsUHJvZHVjdHMsXG4gICAgKTtcbiAgICBpZiAoT2JqZWN0LmtleXMoZmlsdGVycykuaW5jbHVkZXMoJ3NvcnQnKSlcbiAgICAgIHByb2R1Y3RzRm9yUmVuZGVyaW5nID0gU29ydEhhbmRsZXIuaGFuZGxlU29ydChcbiAgICAgICAgZmlsdGVycyxcbiAgICAgICAgcHJvZHVjdHNGb3JSZW5kZXJpbmcsXG4gICAgICApO1xuICAgIGlmIChPYmplY3Qua2V5cyhmaWx0ZXJzKS5pbmNsdWRlcygnc2VhcmNoJykpXG4gICAgICBwcm9kdWN0c0ZvclJlbmRlcmluZyA9IFNlYXJjaEhhbmRsZXIuaGFuZGxlU2VhcmNoKFxuICAgICAgICBmaWx0ZXJzLFxuICAgICAgICBwcm9kdWN0c0ZvclJlbmRlcmluZyxcbiAgICAgICk7XG4gICAgaWYgKE9iamVjdC5rZXlzKGZpbHRlcnMpLmluY2x1ZGVzKCdncmlkJykpIHtcbiAgICAgIGNvbnN0IFtncmlkT3B0aW9uXTogKHN0cmluZyB8IG51bWJlcilbXSA9IFsuLi5maWx0ZXJzLmdyaWRdO1xuICAgICAgTWFpblBhZ2VWaWV3LmhhbmRsZUdyaWRPcHRpb24oY2FyZHMsIGdyaWRPcHRpb24udG9TdHJpbmcoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2R1Y3RzRm9yUmVuZGVyaW5nO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgaGFuZGxlR3JpZE9wdGlvbihjYXJkczogSFRNTEVsZW1lbnQsIG9wdGlvbjogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgZ3JpZEJ1dHRvbnM6IEVsZW1lbnRbXSA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdHNfX2dyaWQtYnV0dG9uJyldO1xuXG4gICAgaWYgKG9wdGlvbiA9PT0gJ2NvbHVtbicpIHtcbiAgICAgIGdyaWRCdXR0b25zWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3Byb2R1Y3RzX19ncmlkLWJ1dHRvbi0tYWN0aXZlJyk7XG4gICAgICBncmlkQnV0dG9uc1sxXS5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0c19fZ3JpZC1idXR0b24tLWFjdGl2ZScpO1xuICAgICAgaWYgKCFjYXJkcy5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRzLS1jb2x1bW4nKSkge1xuICAgICAgICBjYXJkcy5jbGFzc0xpc3QuYWRkKCdjYXJkcy0tY29sdW1uJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRpb24gPT09ICdtYXRyaXgnKSB7XG4gICAgICBncmlkQnV0dG9uc1sxXS5jbGFzc0xpc3QucmVtb3ZlKCdwcm9kdWN0c19fZ3JpZC1idXR0b24tLWFjdGl2ZScpO1xuICAgICAgZ3JpZEJ1dHRvbnNbMF0uY2xhc3NMaXN0LmFkZCgncHJvZHVjdHNfX2dyaWQtYnV0dG9uLS1hY3RpdmUnKTtcbiAgICAgIGlmIChjYXJkcy5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRzLS1jb2x1bW4nKSkge1xuICAgICAgICBjYXJkcy5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkcy0tY29sdW1uJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1haW5QYWdlVmlldztcbiIsImNsYXNzIFBhZ2VOb3RGb3VuZFZpZXcge1xuICBzdGF0aWMgZHJhdygpOiB2b2lkIHtcbiAgICBjb25zdCBtYWluRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICBpZiAobWFpbkVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICBtYWluRWxlbWVudC5jaGlsZHJlblswXS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvck1zZ0hlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gICAgZXJyb3JNc2dIZWFkZXIudGV4dENvbnRlbnQgPSAnRXJyb3IgNDA0LiBQYWdlIG5vdCBmb3VuZCEnO1xuXG4gICAgbWFpbkVsZW1lbnQuYXBwZW5kKGVycm9yTXNnSGVhZGVyKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYWdlTm90Rm91bmRWaWV3O1xuIiwiaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi4vaW50ZXJmYWNlcy9wcm9kdWN0JztcbmltcG9ydCBQYWdlTm90Rm91bmRWaWV3IGZyb20gJy4vcGFnZS1ub3QtZm91bmQtdmlldyc7XG5cbmNsYXNzIFByb2R1Y3RQYWdlVmlldyB7XG4gIHByaXZhdGUgc3RhdGljIGZpbGxUZXh0RWxlbWVudHMoXG4gICAgZWxlbWVudHNBcnJheTogRWxlbWVudFtdLFxuICAgIHZhbHVlc0FycmF5OiBBcnJheTxzdHJpbmcgfCBudW1iZXI+LFxuICApOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzQXJyYXkubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGVsZW1lbnRzQXJyYXlbaV0udGV4dENvbnRlbnQgPSBgJHt2YWx1ZXNBcnJheVtpXX1gO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHNldEltYWdlQ2xpY2tIYW5kbGVyKFxuICAgIGltYWdlc0xpc3Q6IEVsZW1lbnQsXG4gICAgbWFpbkltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LFxuICApOiB2b2lkIHtcbiAgICBpbWFnZXNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50OiBFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgICAgICAgaWYgKG1haW5JbWFnZS5zcmMgIT09IGV2ZW50LnRhcmdldC5zcmMpIHtcbiAgICAgICAgICBtYWluSW1hZ2Uuc3JjID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnc3JjJykgYXMgc3RyaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBmaWxsSW1hZ2VzKFxuICAgIHBhcmVudEVsZW1lbnQ6IEVsZW1lbnQsXG4gICAgaW1hZ2VzTGlzdFRhZzogc3RyaW5nLFxuICAgIG1haW5JbWFnZVRhZzogc3RyaW5nLFxuICAgIGl0ZW06IFByb2R1Y3QsXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHByb2R1Y3RJbWFnZXNMaXN0ID0gcGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgaW1hZ2VzTGlzdFRhZyxcbiAgICApIGFzIEVsZW1lbnQ7XG4gICAgY29uc3QgcHJvZHVjdE1haW5JbWFnZSA9IHBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIG1haW5JbWFnZVRhZyxcbiAgICApIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XG4gICAgW3Byb2R1Y3RJbWFnZXNMaXN0LmNoaWxkcmVuWzBdLCBwcm9kdWN0TWFpbkltYWdlXS5mb3JFYWNoKFxuICAgICAgKGltYWdlOiBFbGVtZW50KSA9PiB7XG4gICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgaXRlbS5pbWFnZXNbMF0pO1xuICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGl0ZW0udGl0bGUpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgaWYgKGl0ZW0uaW1hZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaXRlbS5pbWFnZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgbmV3SW1hZ2UgPSBwcm9kdWN0SW1hZ2VzTGlzdC5jaGlsZHJlblswXS5jbG9uZU5vZGUoXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgKSBhcyBFbGVtZW50O1xuICAgICAgICBuZXdJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGl0ZW0uaW1hZ2VzW2ldKTtcbiAgICAgICAgcHJvZHVjdEltYWdlc0xpc3QuYXBwZW5kKG5ld0ltYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBQcm9kdWN0UGFnZVZpZXcuc2V0SW1hZ2VDbGlja0hhbmRsZXIocHJvZHVjdEltYWdlc0xpc3QsIHByb2R1Y3RNYWluSW1hZ2UpO1xuICB9XG5cbiAgc3RhdGljIGZpbGxQYWdlVGVtcGxhdGUoaXRlbTogUHJvZHVjdCk6IHZvaWQge1xuICAgIGlmICghaXRlbSkgUGFnZU5vdEZvdW5kVmlldy5kcmF3KCk7XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICAncHJvZHVjdC1wYWdlLXRlbXBsYXRlJyxcbiAgICAgICkgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgICAgIGNvbnN0IHByb2R1Y3RQYWdlID0gdGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgIGNvbnN0IGJyZWFkY3J1bWJzOiBFbGVtZW50W10gPSBbXG4gICAgICAgIC4uLnByb2R1Y3RQYWdlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5icmVhZGNydW1ic19faXRlbScpLFxuICAgICAgXS5zbGljZSgxKTtcbiAgICAgIGNvbnN0IHByb2R1Y3RUaXRsZSA9IHByb2R1Y3RQYWdlLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICcucHJvZHVjdF9fdGl0bGUnLFxuICAgICAgKSBhcyBFbGVtZW50O1xuICAgICAgY29uc3QgcHJvZHVjdFByb3BzOiBFbGVtZW50W10gPSBbXG4gICAgICAgIC4uLnByb2R1Y3RQYWdlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9kdWN0X19wcm9wZXJ0eSBzcGFuJyksXG4gICAgICBdO1xuICAgICAgY29uc3QgcHJvZHVjdFByaWNlID0gcHJvZHVjdFBhZ2UucXVlcnlTZWxlY3RvcihcbiAgICAgICAgJy5wcm9kdWN0X19wcmljZSBzcGFuJyxcbiAgICAgICkgYXMgRWxlbWVudDtcbiAgICAgIFByb2R1Y3RQYWdlVmlldy5maWxsVGV4dEVsZW1lbnRzKFxuICAgICAgICBbLi4uYnJlYWRjcnVtYnMsIHByb2R1Y3RUaXRsZSwgLi4ucHJvZHVjdFByb3BzLCBwcm9kdWN0UHJpY2VdLFxuICAgICAgICBbXG4gICAgICAgICAgaXRlbS5jYXRlZ29yeSxcbiAgICAgICAgICBpdGVtLmJyYW5kLFxuICAgICAgICAgIGl0ZW0udGl0bGUsXG4gICAgICAgICAgaXRlbS50aXRsZSxcbiAgICAgICAgICBpdGVtLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIGl0ZW0uY2F0ZWdvcnksXG4gICAgICAgICAgaXRlbS5icmFuZCxcbiAgICAgICAgICBpdGVtLnJhdGluZyxcbiAgICAgICAgICBpdGVtLnN0b2NrLFxuICAgICAgICAgIGl0ZW0uZGlzY291bnRQZXJjZW50YWdlLFxuICAgICAgICAgIGl0ZW0ucHJpY2UsXG4gICAgICAgIF0sXG4gICAgICApO1xuXG4gICAgICBQcm9kdWN0UGFnZVZpZXcuZmlsbEltYWdlcyhcbiAgICAgICAgcHJvZHVjdFBhZ2UsXG4gICAgICAgICcucHJvZHVjdF9faW1hZ2VzLWxpc3QnLFxuICAgICAgICAnLnByb2R1Y3RfX2ltYWdlLS1tYWluJyxcbiAgICAgICAgaXRlbSxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IG1haW5FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4nKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgaWYgKG1haW5FbGVtZW50LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICBtYWluRWxlbWVudC5jaGlsZHJlblswXS5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgbWFpbkVsZW1lbnQuYXBwZW5kKHByb2R1Y3RQYWdlKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUHJvZHVjdFBhZ2VWaWV3O1xuIiwiaW1wb3J0IEJ1aWxkZXIgZnJvbSAnLi4vYnVpbGRlcic7XG5pbXBvcnQgTWFpblBhZ2VWaWV3IGZyb20gJy4vbWFpbi1wYWdlLXZpZXcnO1xuaW1wb3J0IENhcnQgZnJvbSAnLi4vY2FydCc7XG5pbXBvcnQgQ2FydEVsZW1lbnQgZnJvbSAnLi4vaW50ZXJmYWNlcy9jYXJ0LWVsZW1lbnQnO1xuaW1wb3J0IEhlYWRlclZpZXcgZnJvbSAnLi9oZWFkZXItdmlldyc7XG5cbmNsYXNzIENhcnRWaWV3IHtcbiAgc3RhdGljIGRyYXcoKTogdm9pZCB7XG4gICAgY29uc3QgY2FydFBhZ2U6IEhUTUxFbGVtZW50ID0gQnVpbGRlci5jcmVhdGVDbG9uZSgnY2FydC10ZW1wbGF0ZScpO1xuICAgIGNvbnN0IHN0b3JhZ2VDYXJ0OiBzdHJpbmcgfCBudWxsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKTtcbiAgICBpZiAodHlwZW9mIHN0b3JhZ2VDYXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKHN0b3JhZ2VDYXJ0ID09PSAnW10nKSB7XG4gICAgICAgIGNhcnRQYWdlLmNoaWxkcmVuWzBdLnRleHRDb250ZW50ID0gJ0NhcnQgaXMgRW1wdHknO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgQ2FydFZpZXcuZmlsbFByb2R1Y3RzSW5mbyhjYXJ0UGFnZSwgc3RvcmFnZUNhcnQpO1xuICAgICAgICBDYXJ0Vmlldy5maWxsU3VtbWFyeShjYXJ0UGFnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbWFpbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmIChtYWluRWxlbWVudC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIG1haW5FbGVtZW50LmNoaWxkcmVuWzBdLnJlbW92ZSgpO1xuICAgIH1cbiAgICBtYWluRWxlbWVudC5hcHBlbmQoY2FydFBhZ2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZmlsbFByb2R1Y3RzSW5mbyhcbiAgICBjYXJ0UGFnZTogSFRNTEVsZW1lbnQsXG4gICAgY2FydEluZm86IHN0cmluZyxcbiAgKTogdm9pZCB7XG4gICAgY29uc3Qgb3JkZXJMaXN0ID0gY2FydFBhZ2UucXVlcnlTZWxlY3RvcignLm9yZGVyX19saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgY2FydFByb2R1Y3RzID0gSlNPTi5wYXJzZShjYXJ0SW5mbykgYXMgQ2FydEVsZW1lbnRbXTtcbiAgICBjYXJ0UHJvZHVjdHMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IG9yZGVySXRlbSA9IEJ1aWxkZXIuY3JlYXRlQ2xvbmUoJ29yZGVyLWl0ZW0tdGVtcGxhdGUnKTtcbiAgICAgIGNvbnN0IG9yZGVyZWRQcm9kdWN0ID0gTWFpblBhZ2VWaWV3LmFsbFByb2R1Y3RzW2l0ZW0uaWQgLSAxXTtcbiAgICAgIEJ1aWxkZXIuZmlsbFRleHRCbG9jayhcbiAgICAgICAgb3JkZXJJdGVtLFxuICAgICAgICAnLm9yZGVyX19udW1iZXInLFxuICAgICAgICAoaW5kZXggKyAxKS50b1N0cmluZygpLFxuICAgICAgKTtcbiAgICAgIEJ1aWxkZXIuZmlsbERhdGFGaWVsZHMob3JkZXJJdGVtLCBvcmRlcmVkUHJvZHVjdCk7XG4gICAgICBCdWlsZGVyLmZpbGxUZXh0QmxvY2soXG4gICAgICAgIG9yZGVySXRlbSxcbiAgICAgICAgJy5vcmRlcl9fYW1vdW50JyxcbiAgICAgICAgaXRlbS5hbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICk7XG4gICAgICBCdWlsZGVyLmZpbGxUZXh0QmxvY2soXG4gICAgICAgIG9yZGVySXRlbSxcbiAgICAgICAgJy5vcmRlcl9fcHJpY2Ugc3BhbicsXG4gICAgICAgIENhcnQuZ2V0UHJvZHVjdFRvdGFsUHJpY2Uob3JkZXJlZFByb2R1Y3QpLnRvU3RyaW5nKCksXG4gICAgICAgIHRydWUsXG4gICAgICApO1xuXG4gICAgICBjb25zdCBvcmRlckJ1dHRvbnMgPSBbXG4gICAgICAgIC4uLm9yZGVySXRlbS5xdWVyeVNlbGVjdG9yQWxsKCcub3JkZXJfX2J1dHRvbicpLFxuICAgICAgXSBhcyBIVE1MRWxlbWVudFtdO1xuICAgICAgb3JkZXJCdXR0b25zLmZvckVhY2goKGJ1dHRvbjogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgYnV0dG9uLmRhdGFzZXQuaWQgPSBvcmRlcmVkUHJvZHVjdC5pZC50b1N0cmluZygpO1xuICAgICAgfSk7XG4gICAgICBvcmRlckxpc3QuYXBwZW5kKG9yZGVySXRlbSk7XG4gICAgfSk7XG4gICAgQ2FydFZpZXcuc2V0QW1vdW50QnV0dG9uSGFuZGxlcihvcmRlckxpc3QpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZmlsbFN1bW1hcnkocGFyZW50c0Jsb2NrOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIEJ1aWxkZXIuZmlsbFRleHRCbG9jayhcbiAgICAgIHBhcmVudHNCbG9jayxcbiAgICAgICcuc3VtbWFyeV9fcHJvZHVjdHMgc3BhbicsXG4gICAgICBDYXJ0LmdldFRvdGFsQW1vdW50KCkudG9TdHJpbmcoKSxcbiAgICApO1xuICAgIEJ1aWxkZXIuZmlsbFRleHRCbG9jayhcbiAgICAgIHBhcmVudHNCbG9jayxcbiAgICAgICcuc3VtbWFyeV9fdG90YWwgc3BhbicsXG4gICAgICBDYXJ0LmdldENhcnRTdW0oKS50b1N0cmluZygpLFxuICAgICAgdHJ1ZSxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgc2V0QW1vdW50QnV0dG9uSGFuZGxlcihvcmRlckxpc3Q6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgb3JkZXJMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxCdXR0b25FbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGFtb3VudEJsb2NrID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgJy5vcmRlcl9fYW1vdW50JyxcbiAgICAgICAgKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgbGV0IHByZXZpb3VzQW1vdW50ID0gTnVtYmVyKGFtb3VudEJsb2NrLnRleHRDb250ZW50KTtcbiAgICAgICAgY29uc3QgcHJvZHVjdElEID0gTnVtYmVyKGV2ZW50LnRhcmdldC5kYXRhc2V0LmlkKTtcbiAgICAgICAgY29uc3Qgb3JkZXJlZFByb2R1Y3QgPSBNYWluUGFnZVZpZXcuYWxsUHJvZHVjdHNbcHJvZHVjdElEIC0gMV07XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuZGF0YXNldC5hbW91bnQgPT09ICdkZWNyZWFzZScpIHtcbiAgICAgICAgICBpZiAocHJldmlvdXNBbW91bnQgPT09IDEpIHtcbiAgICAgICAgICAgIENhcnQuZHJvcEZyb21DYXJ0KG9yZGVyZWRQcm9kdWN0KTtcbiAgICAgICAgICAgIENhcnRWaWV3LmRyYXcoKTtcbiAgICAgICAgICAgIHByZXZpb3VzQW1vdW50ID0gMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ2FydC5kZWNyZWFzZUFtb3VudChvcmRlcmVkUHJvZHVjdCk7XG4gICAgICAgICAgICBhbW91bnRCbG9jay50ZXh0Q29udGVudCA9IChwcmV2aW91c0Ftb3VudCAtIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuZGF0YXNldC5hbW91bnQgPT09ICdpbmNyZWFzZScpIHtcbiAgICAgICAgICBjb25zdCBtYXhBbW91bnQ6IG51bWJlciA9XG4gICAgICAgICAgICBNYWluUGFnZVZpZXcuYWxsUHJvZHVjdHNbcHJvZHVjdElEIC0gMV0uc3RvY2s7XG4gICAgICAgICAgaWYgKHByZXZpb3VzQW1vdW50ICE9PSBtYXhBbW91bnQpIHtcbiAgICAgICAgICAgIENhcnQuaW5jcmVhc2VBbW91bnQob3JkZXJlZFByb2R1Y3QpO1xuICAgICAgICAgICAgYW1vdW50QmxvY2sudGV4dENvbnRlbnQgPSAocHJldmlvdXNBbW91bnQgKyAxKS50b1N0cmluZygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcmV2aW91c0Ftb3VudCAhPT0gMCkge1xuICAgICAgICAgIGNvbnN0IG9yZGVyRGlnaXRzID0gYW1vdW50QmxvY2sucGFyZW50RWxlbWVudFxuICAgICAgICAgICAgPy5wYXJlbnRFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIEJ1aWxkZXIuZmlsbFRleHRCbG9jayhcbiAgICAgICAgICAgIG9yZGVyRGlnaXRzLFxuICAgICAgICAgICAgJy5vcmRlcl9fcHJpY2Ugc3BhbicsXG4gICAgICAgICAgICBDYXJ0LmdldFByb2R1Y3RUb3RhbFByaWNlKG9yZGVyZWRQcm9kdWN0KS50b1N0cmluZygpLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3VtbWFyeUJsb2NrOiBFbGVtZW50IHwgbnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdW1tYXJ5Jyk7XG4gICAgICAgIGlmIChzdW1tYXJ5QmxvY2sgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgIENhcnRWaWV3LmZpbGxTdW1tYXJ5KHN1bW1hcnlCbG9jayk7XG4gICAgICAgIH1cblxuICAgICAgICBIZWFkZXJWaWV3LnVwZGF0ZVRvdGFsQ2FydERpc3BsYXkoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJ0VmlldztcbiIsImltcG9ydCBGaWx0ZXJzT2JqZWN0IGZyb20gJy4vaW50ZXJmYWNlcy9maWx0ZXJzJztcbmltcG9ydCBNYWluUGFnZVZpZXcgZnJvbSAnLi92aWV3L21haW4tcGFnZS12aWV3JztcbmltcG9ydCBQcm9kdWN0UGFnZVZpZXcgZnJvbSAnLi92aWV3L3Byb2R1Y3Qtdmlldyc7XG5pbXBvcnQgQ2FydFBhZ2VWaWV3IGZyb20gJy4vdmlldy9jYXJ0LXZpZXcnO1xuaW1wb3J0IFBhZ2VOb3RGb3VuZFZpZXcgZnJvbSAnLi92aWV3L3BhZ2Utbm90LWZvdW5kLXZpZXcnO1xuXG5jbGFzcyBSb3V0ZXIge1xuICBzdGF0aWMgc2V0Um91dGUgPSAoZTogRXZlbnQpOiB2b2lkID0+IHtcbiAgICBjb25zdCBldmVudDogRXZlbnQgPSBlIHx8IHdpbmRvdy5ldmVudDtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGhyZWY6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQpIHtcbiAgICAgIGhyZWYgPSBldmVudC5jdXJyZW50VGFyZ2V0LmhyZWY7XG4gICAgfVxuXG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHt9LCAnJywgaHJlZik7XG4gICAgUm91dGVyLmhhbmRsZUxvY2F0aW9uKCk7XG4gIH07XG5cbiAgc3RhdGljIHNldFVybFBhcmFtcyhmaWx0ZXJzOiBGaWx0ZXJzT2JqZWN0KTogdm9pZCB7XG4gICAgY29uc3QgcGFyYW1zID0gUm91dGVyLnRyYW5zZm9ybVRvVXJsUGFyYW1zKGZpbHRlcnMpO1xuICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShmaWx0ZXJzLCAnJywgcGFyYW1zKTtcbiAgICBSb3V0ZXIuaGFuZGxlTG9jYXRpb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHRyYW5zZm9ybVRvVXJsUGFyYW1zKGZpbHRlcnM6IEZpbHRlcnNPYmplY3QpOiBzdHJpbmcge1xuICAgIGNvbnN0IHF1ZXJ5OiBzdHJpbmcgPSBPYmplY3QuZW50cmllcyhmaWx0ZXJzKVxuICAgICAgLm1hcCgoW2tleSwgdmFsdWVzXSkgPT4gYCR7a2V5fT0ke3ZhbHVlcy5qb2luKCc7Jyl9YClcbiAgICAgIC5qb2luKCcmJyk7XG4gICAgcmV0dXJuIGA/JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfWA7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyB0cmFuc2Zvcm1VcmxQYXJhbXModXJsUGFyYW1zOiBzdHJpbmcpOiBGaWx0ZXJzT2JqZWN0IHtcbiAgICBjb25zdCBmaWx0ZXJzOiBGaWx0ZXJzT2JqZWN0ID0ge307XG5cbiAgICBpZiAodXJsUGFyYW1zKSB7XG4gICAgICBjb25zdCBwYXJhbXM6IHN0cmluZyA9IGRlY29kZVVSSUNvbXBvbmVudCh1cmxQYXJhbXMpLnN1YnN0cmluZygxKTtcbiAgICAgIHBhcmFtcy5zcGxpdCgnJicpLmZvckVhY2goKGZpbHRlclN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBba2V5LCB2YWx1ZXNdID0gZmlsdGVyU3RyaW5nLnNwbGl0KCc9Jyk7XG4gICAgICAgIGZpbHRlcnNba2V5XSA9IHZhbHVlcz8uc3BsaXQoJzsnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXJzO1xuICB9XG5cbiAgc3RhdGljIGhhbmRsZUxvY2F0aW9uKCk6IHZvaWQge1xuICAgIGNvbnN0IHBhdGg6IHN0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbiAgICBjb25zdCBmaWx0ZXJzID0gUm91dGVyLnRyYW5zZm9ybVVybFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcblxuICAgIGlmIChwYXRoID09PSAnLycpIHtcbiAgICAgIE1haW5QYWdlVmlldy5kcmF3KGZpbHRlcnMsIFJvdXRlci5zZXRVcmxQYXJhbXMsIFJvdXRlci5zZXRSb3V0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHBhZ2U6IHN0cmluZyA9IHBhdGguc3BsaXQoJy8nKVsxXTtcbiAgICAgIHN3aXRjaCAocGFnZSkge1xuICAgICAgICBjYXNlICdwcm9kdWN0LWRldGFpbHMnOlxuICAgICAgICAgIC8vIGNvbnN0IHByb2R1Y3RJZCA9IE51bWJlcihwYXRoLnNwbGl0KCcvJylbMl0pO1xuICAgICAgICAgIFByb2R1Y3RQYWdlVmlldy5maWxsUGFnZVRlbXBsYXRlKFxuICAgICAgICAgICAgTWFpblBhZ2VWaWV3LmFsbFByb2R1Y3RzW051bWJlcihwYXRoLnNwbGl0KCcvJylbMl0pIC0gMV0sXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdjYXJ0JzpcbiAgICAgICAgICBDYXJ0UGFnZVZpZXcuZHJhdygpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgUGFnZU5vdEZvdW5kVmlldy5kcmF3KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJvdXRlcjtcbiIsImltcG9ydCBQcm9kdWN0IGZyb20gJy4vaW50ZXJmYWNlcy9wcm9kdWN0JztcblxuaW50ZXJmYWNlIFJlc3BvbnNlRGF0YSB7XG4gIHByb2R1Y3RzOiBQcm9kdWN0W107XG4gIHRvdGFsOiBudW1iZXI7XG4gIHNraXA6IG51bWJlcjtcbiAgbGltaXQ6IG51bWJlcjtcbn1cblxuY2xhc3MgRGF0YUxvYWRlciB7XG4gIHByaXZhdGUgc3RhdGljIGVycm9ySGFuZGxlcihyZXM6IFJlc3BvbnNlKTogUmVzcG9uc2UgfCBuZXZlciB7XG4gICAgaWYgKHJlcy5vaykgcmV0dXJuIHJlcztcblxuICAgIGlmIChyZXMuc3RhdHVzID09PSA0MDEgfHwgcmVzLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICBjb25zb2xlLmxvZyhgU29ycnksIGJ1dCB0aGVyZSBpcyAke3Jlcy5zdGF0dXN9IGVycm9yOiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICAgIH1cbiAgICB0aHJvdyBFcnJvcihyZXMuc3RhdHVzVGV4dCk7XG4gIH1cblxuICBzdGF0aWMgZmV0Y2hQcm9kdWN0c0RhdGEoKTogUHJvbWlzZTxQcm9kdWN0W10+IHtcbiAgICByZXR1cm4gZmV0Y2goJ2h0dHBzOi8vZHVtbXlqc29uLmNvbS9wcm9kdWN0cz9saW1pdD0xMDAnKVxuICAgICAgLnRoZW4oKHJlcykgPT4gRGF0YUxvYWRlci5lcnJvckhhbmRsZXIocmVzKSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigoZGF0YSkgPT4gKGRhdGEgYXMgUmVzcG9uc2VEYXRhKS5wcm9kdWN0cyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YUxvYWRlcjtcbiIsImltcG9ydCAnLi9zdHlsZS5zY3NzJztcblxuaW1wb3J0IFJvdXRlciBmcm9tICcuL3JvdXRlcic7XG5pbXBvcnQgRGF0YUxvYWRlciBmcm9tICcuL2RhdGEtbG9hZGVyJztcbmltcG9ydCBNYWluUGFnZVZpZXcgZnJvbSAnLi92aWV3L21haW4tcGFnZS12aWV3JztcbmltcG9ydCBDYXJ0IGZyb20gJy4vY2FydCc7XG5pbXBvcnQgSGVhZGVyVmlldyBmcm9tICcuL3ZpZXcvaGVhZGVyLXZpZXcnO1xuXG5jb25zdCBsb2dvTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvLWxpbmsnKTtcbmxvZ29MaW5rPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gUm91dGVyLnNldFJvdXRlKGV2ZW50KSk7XG5cbmNvbnN0IGNhcnRMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcnQtbGluaycpO1xuY2FydExpbms/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiBSb3V0ZXIuc2V0Um91dGUoZXZlbnQpKTtcblxuQ2FydC5sb2FkQ2FydCgpO1xuSGVhZGVyVmlldy51cGRhdGVUb3RhbENhcnREaXNwbGF5KCk7XG5cbkRhdGFMb2FkZXIuZmV0Y2hQcm9kdWN0c0RhdGEoKVxuICAudGhlbigocHJvZHVjdHMpID0+IHtcbiAgICBNYWluUGFnZVZpZXcuaW5pdChwcm9kdWN0cyk7XG4gICAgUm91dGVyLmhhbmRsZUxvY2F0aW9uKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsICgpID0+IFJvdXRlci5oYW5kbGVMb2NhdGlvbigpKTtcbiJdLCJuYW1lcyI6WyJDYXJ0Iiwic3RhdGljIiwicHJvZHVjdCIsImNhcnQiLCJmaW5kSW5kZXgiLCJlbCIsImlkIiwicHVzaCIsImFtb3VudCIsInByaWNlIiwic2F2ZUNhcnQiLCJzcGxpY2UiLCJpZHgiLCJzdW0iLCJmb3JFYWNoIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJ0RnJvbVN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2UiLCJIZWFkZXJWaWV3IiwidG90YWxTdW1DYXJ0RGlzcGxheSIsInRleHRDb250ZW50IiwidG90YWxBbW91bnRDYXJ0RGlzcGxheSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIkdyaWRWaWV3IiwiaXRlbSIsInRlbXBsYXRlIiwibGlua0hhbmRsZXIiLCJjYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsImNsYXNzTmFtZSIsInRpdGxlIiwiaW1nIiwic2V0QXR0cmlidXRlIiwidGh1bWJuYWlsIiwiY2FyZExpc3QiLCJjaGlsZHJlbiIsImNhdGVnb3J5IiwiYnJhbmQiLCJkaXNjb3VudFBlcmNlbnRhZ2UiLCJyYXRpbmciLCJzdG9jayIsImRldGFpbHNMaW5rIiwiaHJlZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRUb0NhcnRCdG4iLCJwcm9kdWN0cyIsImNhcmRzIiwiaW5uZXJIVE1MIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmQiLCJmaWxsQ2FyZCIsIkRhdGFIYW5kbGVyIiwicHJvcGVydHkiLCJwcm9wZXJ0aWVzIiwicHJvcCIsIk1hdGgiLCJtaW4iLCJtYXAiLCJtYXgiLCJnZXRQcm9wZXJ0aWVzIiwiZ2V0TWluIiwiZ2V0TWF4IiwiRmlsdGVyc1ZpZXciLCJncm91cCIsInBhcmFtZXRlcnMiLCJmaWx0ZXJzTGlzdCIsImNoZWNrYm94VGVtcGxhdGUiLCJPYmplY3QiLCJrZXlzIiwiY2hlY2tib3giLCJjaGVja2JveElucHV0IiwiY2hlY2tib3hMYWJlbCIsImh0bWxGb3IiLCJibG9jayIsImlzUHJpY2UiLCJyYW5nZUZyb20iLCJyYW5nZVRvIiwicmFuZ2VJbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmFuZ2VCYXIiLCJpIiwibGVuZ3RoIiwidG9TdHJpbmciLCJ2YWx1ZSIsInNldFJhbmdlSGFuZGxlciIsInJhbmdlIiwiaXNMZWZ0IiwicmFuZ2VMZWZ0IiwicmFuZ2VSaWdodCIsIm1pbkdhcCIsInRleHRCbG9jayIsImxlZnRWYWx1ZSIsInBhcnNlSW50IiwicmlnaHRWYWx1ZSIsInBlcmNlbnRMZWZ0IiwicGVyY2VudFJpZ2h0Iiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwiaXRlbXMiLCJmaWx0ZXJzQmxvY2siLCJmaWx0ZXJzR3JvdXBzIiwiY2F0ZWdvcmllcyIsImJyYW5kcyIsImZpbGxDaGVja2JveEdyb3VwIiwiZmlsbFJhbmdlIiwiRmlsdGVyc0xpc3RlbmVyIiwicXVlcnlIYW5kbGVyIiwiYWRkQ2hlY2tib3hMaXN0ZW5lciIsImFkZFJhbmdlTGlzdGVuZXIiLCJhZGRTb3J0TGlzdGVuZXIiLCJhZGRTZWFyY2hMaXN0ZW5lciIsImFkZEdyaWRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJIVE1MTGFiZWxFbGVtZW50IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInBhcmFtZXRlciIsInBhcmVudEVsZW1lbnQiLCJ0b0xvd2VyQ2FzZSIsImNoZWNrZWQiLCJpbmRleCIsImFwcGxpZWRGaWx0ZXJzIiwiaW5kZXhPZiIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkhUTUxJbnB1dEVsZW1lbnQiLCJzb3J0U2VsZWN0Iiwic2VsZWN0ZWRPcHRpb24iLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsInNvcnQiLCJzZWFyY2hJbnB1dCIsInNlYXJjaFF1ZXJ5Iiwic2VhcmNoIiwiSFRNTEJ1dHRvbkVsZW1lbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImdyaWQiLCJGaWx0ZXJzSGFuZGxlciIsImluc3RhbmNlIiwiaGFuZGxlckluc3RhbmNlIiwiZmlsdGVycyIsImZpbHRlciIsImlucHV0cyIsIkV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInZhbHVlcyIsImlucHV0IiwiaW5jbHVkZXMiLCJmaWx0ZXJBcnJheSIsImZpbHRlcmVkUHJvZHVjdHMiLCJmaWx0ZXJLZXlzIiwibmV3RmlsdGVyZWRQcm9kdWN0cyIsImNoZWNrYm94RmlsdGVycyIsInJhbmdlRmlsdGVycyIsImVudHJpZXMiLCJjaGVja2JveFZhbHVlcyIsInJhbmdlVmFsdWVzIiwiaGFuZGxlQ2hlY2tib3hlc1ZpZXciLCJoYW5kbGVSYW5nZVZpZXciLCJmaWx0ZXJQcm9kdWN0cyIsInNvcnRlZFByb2R1Y3RzIiwib3B0aW9uIiwiSFRNTFNlbGVjdEVsZW1lbnQiLCJkaXJlY3Rpb24iLCJzcGxpdCIsImEiLCJiIiwiTnVtYmVyIiwiZm91bmRQcm9kdWN0cyIsImZvY3VzIiwicHJvZHVjdEZvclNlYXJjaCIsInRhZyIsImNsYXNzZXMiLCJjcmVhdGVFbGVtZW50IiwiYWRkIiwicGFyZW50QmxvY2siLCJzZWxlY3RvciIsImtleSIsIkhUTUxJbWFnZUVsZW1lbnQiLCJzcmMiLCJFbGVtZW50IiwiY291bnQiLCJNYWluUGFnZVZpZXciLCJhbGxQcm9kdWN0cyIsIl9hbGxQcm9kdWN0cyIsImUiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInRoZW4iLCJidG4iLCJzZXRUaW1lb3V0IiwiY2F0Y2giLCJoZWFkZXIiLCJjb250YWluZXIiLCJwcm9kdWN0c0Jsb2NrIiwicHJvZHVjdHNGb3JSZW5kZXJpbmciLCJydW5GaWx0ZXJzIiwibm9Qcm9kdWN0c0ZvdW5kIiwiY29weUxpbmtCdG4iLCJjb3B5TGlua0hhbmRsZXIiLCJyZXNldEZpbHRlcnNCdG4iLCJncmlkT3B0aW9uIiwiaGFuZGxlR3JpZE9wdGlvbiIsImdyaWRCdXR0b25zIiwicmVtb3ZlIiwibWFpbkVsZW1lbnQiLCJlcnJvck1zZ0hlYWRlciIsIlByb2R1Y3RQYWdlVmlldyIsImVsZW1lbnRzQXJyYXkiLCJ2YWx1ZXNBcnJheSIsImltYWdlc0xpc3QiLCJtYWluSW1hZ2UiLCJnZXRBdHRyaWJ1dGUiLCJpbWFnZXNMaXN0VGFnIiwibWFpbkltYWdlVGFnIiwicHJvZHVjdEltYWdlc0xpc3QiLCJwcm9kdWN0TWFpbkltYWdlIiwiaW1hZ2UiLCJpbWFnZXMiLCJuZXdJbWFnZSIsInNldEltYWdlQ2xpY2tIYW5kbGVyIiwicHJvZHVjdFBhZ2UiLCJicmVhZGNydW1icyIsInNsaWNlIiwicHJvZHVjdFRpdGxlIiwicHJvZHVjdFByb3BzIiwicHJvZHVjdFByaWNlIiwiZmlsbFRleHRFbGVtZW50cyIsImRlc2NyaXB0aW9uIiwiZmlsbEltYWdlcyIsIkNhcnRWaWV3IiwiY2FydFBhZ2UiLCJzdG9yYWdlQ2FydCIsImZpbGxQcm9kdWN0c0luZm8iLCJmaWxsU3VtbWFyeSIsImNhcnRJbmZvIiwib3JkZXJMaXN0Iiwib3JkZXJJdGVtIiwib3JkZXJlZFByb2R1Y3QiLCJidXR0b24iLCJkYXRhc2V0Iiwic2V0QW1vdW50QnV0dG9uSGFuZGxlciIsInBhcmVudHNCbG9jayIsImFtb3VudEJsb2NrIiwicHJldmlvdXNBbW91bnQiLCJwcm9kdWN0SUQiLCJkcmF3Iiwib3JkZXJEaWdpdHMiLCJzdW1tYXJ5QmxvY2siLCJIVE1MRWxlbWVudCIsIlJvdXRlciIsInBhcmFtcyIsInRyYW5zZm9ybVRvVXJsUGFyYW1zIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsImhhbmRsZUxvY2F0aW9uIiwicXVlcnkiLCJqb2luIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidXJsUGFyYW1zIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic3Vic3RyaW5nIiwiZmlsdGVyU3RyaW5nIiwicGF0aCIsInBhdGhuYW1lIiwidHJhbnNmb3JtVXJsUGFyYW1zIiwic2V0VXJsUGFyYW1zIiwic2V0Um91dGUiLCJjdXJyZW50VGFyZ2V0IiwiSFRNTEFuY2hvckVsZW1lbnQiLCJEYXRhTG9hZGVyIiwicmVzIiwib2siLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzVGV4dCIsIkVycm9yIiwiZmV0Y2giLCJlcnJvckhhbmRsZXIiLCJqc29uIiwiZGF0YSIsImxvZ29MaW5rIiwiY2FydExpbmsiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=